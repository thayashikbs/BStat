<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>8 決定木分析 | ビジネス統計</title>
  <meta name="description" content="8 決定木分析 | ビジネス統計" />
  <meta name="generator" content="bookdown 0.35 and GitBook 2.6.7" />

  <meta property="og:title" content="8 決定木分析 | ビジネス統計" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="8 決定木分析 | ビジネス統計" />
  
  
  

<meta name="author" content="林 高樹" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="判別分析.html"/>
<link rel="next" href="主成分分析-pca.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> はじめに</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#コースの目的"><i class="fa fa-check"></i><b>1.1</b> コースの目的</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#統計学統計的手法の学習について"><i class="fa fa-check"></i><b>1.2</b> 統計学/統計的手法の学習について</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#学習の目標"><i class="fa fa-check"></i>学習の目標</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#統計学統計的手法の学習方法"><i class="fa fa-check"></i>統計学/統計的手法の学習方法</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#統計学統計的手法の学習ステップ"><i class="fa fa-check"></i>統計学/統計的手法の学習ステップ</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#ビジネス応用における統計学の最近の趨勢"><i class="fa fa-check"></i><b>1.3</b> ビジネス応用における統計学の最近の趨勢</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#本書内の記載の注意点"><i class="fa fa-check"></i><b>1.4</b> 本書内の記載の注意点</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="r言語の基本.html"><a href="r言語の基本.html"><i class="fa fa-check"></i><b>2</b> R言語の基本</a>
<ul>
<li class="chapter" data-level="2.1" data-path="r言語の基本.html"><a href="r言語の基本.html#rの基本プログラミング"><i class="fa fa-check"></i><b>2.1</b> Rの基本プログラミング</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="r言語の基本.html"><a href="r言語の基本.html#基本操作"><i class="fa fa-check"></i><b>2.1.1</b> 基本操作</a></li>
<li class="chapter" data-level="2.1.2" data-path="r言語の基本.html"><a href="r言語の基本.html#基本構文"><i class="fa fa-check"></i><b>2.1.2</b> 基本構文</a></li>
<li class="chapter" data-level="2.1.3" data-path="r言語の基本.html"><a href="r言語の基本.html#自作関数"><i class="fa fa-check"></i><b>2.1.3</b> 自作関数</a></li>
<li class="chapter" data-level="2.1.4" data-path="r言語の基本.html"><a href="r言語の基本.html#パッケージのインストール-読み込み"><i class="fa fa-check"></i><b>2.1.4</b> パッケージのインストール &amp; 読み込み</a></li>
<li class="chapter" data-level="2.1.5" data-path="r言語の基本.html"><a href="r言語の基本.html#ヘルプ"><i class="fa fa-check"></i><b>2.1.5</b> ヘルプ</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="r言語の基本.html"><a href="r言語の基本.html#データの型や構造"><i class="fa fa-check"></i><b>2.2</b> データの型や構造</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="r言語の基本.html"><a href="r言語の基本.html#データの値の種類-データ型"><i class="fa fa-check"></i><b>2.2.1</b> データの値の種類 (“データ型”)</a></li>
<li class="chapter" data-level="2.2.2" data-path="r言語の基本.html"><a href="r言語の基本.html#データの配列の仕方-データ構造"><i class="fa fa-check"></i><b>2.2.2</b> データの配列の仕方 (“データ構造”)</a></li>
<li class="chapter" data-level="2.2.3" data-path="r言語の基本.html"><a href="r言語の基本.html#ベクトル"><i class="fa fa-check"></i><b>2.2.3</b> ベクトル</a></li>
<li class="chapter" data-level="2.2.4" data-path="r言語の基本.html"><a href="r言語の基本.html#行列"><i class="fa fa-check"></i><b>2.2.4</b> 行列</a></li>
<li class="chapter" data-level="2.2.5" data-path="r言語の基本.html"><a href="r言語の基本.html#リスト"><i class="fa fa-check"></i><b>2.2.5</b> リスト</a></li>
<li class="chapter" data-level="2.2.6" data-path="r言語の基本.html"><a href="r言語の基本.html#データフレーム"><i class="fa fa-check"></i><b>2.2.6</b> データフレーム</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="r言語の基本.html"><a href="r言語の基本.html#データの操作演算"><i class="fa fa-check"></i><b>2.3</b> データの操作・演算</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="r言語の基本.html"><a href="r言語の基本.html#ベクトルの結合-ソート"><i class="fa fa-check"></i><b>2.3.1</b> ベクトルの結合, ソート</a></li>
<li class="chapter" data-level="2.3.2" data-path="r言語の基本.html"><a href="r言語の基本.html#二項演算"><i class="fa fa-check"></i><b>2.3.2</b> 二項演算</a></li>
<li class="chapter" data-level="2.3.3" data-path="r言語の基本.html"><a href="r言語の基本.html#論理演算"><i class="fa fa-check"></i><b>2.3.3</b> 論理演算</a></li>
<li class="chapter" data-level="2.3.4" data-path="r言語の基本.html"><a href="r言語の基本.html#条件式"><i class="fa fa-check"></i><b>2.3.4</b> 条件式</a></li>
<li class="chapter" data-level="2.3.5" data-path="r言語の基本.html"><a href="r言語の基本.html#行列演算"><i class="fa fa-check"></i><b>2.3.5</b> 行列演算</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="r言語の基本.html"><a href="r言語の基本.html#r関数"><i class="fa fa-check"></i><b>2.4</b> R関数</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="r言語の基本.html"><a href="r言語の基本.html#数学基本関数"><i class="fa fa-check"></i><b>2.4.1</b> 数学基本関数</a></li>
<li class="chapter" data-level="2.4.2" data-path="r言語の基本.html"><a href="r言語の基本.html#基本統計量の計算"><i class="fa fa-check"></i><b>2.4.2</b> 基本統計量の計算</a></li>
<li class="chapter" data-level="2.4.3" data-path="r言語の基本.html"><a href="r言語の基本.html#確率分布"><i class="fa fa-check"></i><b>2.4.3</b> 確率分布</a></li>
<li class="chapter" data-level="2.4.4" data-path="r言語の基本.html"><a href="r言語の基本.html#その他便利な関数"><i class="fa fa-check"></i><b>2.4.4</b> その他便利な関数</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="r言語の基本.html"><a href="r言語の基本.html#データの可視化"><i class="fa fa-check"></i><b>2.5</b> データの可視化</a></li>
<li class="chapter" data-level="2.6" data-path="r言語の基本.html"><a href="r言語の基本.html#ファイル入出力"><i class="fa fa-check"></i><b>2.6</b> ファイル入出力</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="r言語の基本.html"><a href="r言語の基本.html#テキストファイル読み込み"><i class="fa fa-check"></i><b>2.6.1</b> テキストファイル読み込み</a></li>
<li class="chapter" data-level="2.6.2" data-path="r言語の基本.html"><a href="r言語の基本.html#テキストファイル書き出し"><i class="fa fa-check"></i><b>2.6.2</b> テキストファイル書き出し</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="仮説検定.html"><a href="仮説検定.html"><i class="fa fa-check"></i><b>3</b> 仮説検定</a>
<ul>
<li class="chapter" data-level="3.1" data-path="仮説検定.html"><a href="仮説検定.html#平均値の差の検定"><i class="fa fa-check"></i><b>3.1</b> 平均値の差の検定</a></li>
<li class="chapter" data-level="3.2" data-path="仮説検定.html"><a href="仮説検定.html#カイ二乗検定"><i class="fa fa-check"></i><b>3.2</b> カイ二乗検定</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="仮説検定.html"><a href="仮説検定.html#独立性検定"><i class="fa fa-check"></i><b>3.2.1</b> 独立性検定</a></li>
<li class="chapter" data-level="3.2.2" data-path="仮説検定.html"><a href="仮説検定.html#適合度検定"><i class="fa fa-check"></i><b>3.2.2</b> 適合度検定</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="仮説検定.html"><a href="仮説検定.html#分析例-統計テストデータ"><i class="fa fa-check"></i><b>3.3</b> 分析例: 統計テストデータ</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="分散分析-anova.html"><a href="分散分析-anova.html"><i class="fa fa-check"></i><b>4</b> 分散分析 (ANOVA)</a>
<ul>
<li class="chapter" data-level="4.1" data-path="分散分析-anova.html"><a href="分散分析-anova.html#元配置anova"><i class="fa fa-check"></i><b>4.1</b> 1元配置ANOVA</a></li>
<li class="chapter" data-level="4.2" data-path="分散分析-anova.html"><a href="分散分析-anova.html#元配置anova-1"><i class="fa fa-check"></i><b>4.2</b> 2元配置ANOVA</a></li>
<li class="chapter" data-level="4.3" data-path="分散分析-anova.html"><a href="分散分析-anova.html#分析例"><i class="fa fa-check"></i><b>4.3</b> 分析例</a>
<ul>
<li class="chapter" data-level="" data-path="分散分析-anova.html"><a href="分散分析-anova.html#データ1-2業種口コミサイト仮想データ"><i class="fa fa-check"></i>データ1: 2業種口コミサイト(仮想データ)</a></li>
<li class="chapter" data-level="" data-path="分散分析-anova.html"><a href="分散分析-anova.html#データ2-統計小テストデータ"><i class="fa fa-check"></i>データ2: 統計小テストデータ</a></li>
<li class="chapter" data-level="" data-path="分散分析-anova.html"><a href="分散分析-anova.html#データ3-経営科学アンケート"><i class="fa fa-check"></i>データ3: 経営科学アンケート</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="線形回帰分析.html"><a href="線形回帰分析.html"><i class="fa fa-check"></i><b>5</b> 線形回帰分析</a>
<ul>
<li class="chapter" data-level="5.1" data-path="線形回帰分析.html"><a href="線形回帰分析.html#重回帰分析の基本操作"><i class="fa fa-check"></i><b>5.1</b> 重回帰分析の基本操作</a>
<ul>
<li class="chapter" data-level="" data-path="線形回帰分析.html"><a href="線形回帰分析.html#データ1-1ルーム賃貸マンション"><i class="fa fa-check"></i>データ1: 1ルーム賃貸マンション</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="線形回帰分析.html"><a href="線形回帰分析.html#変数の選択"><i class="fa fa-check"></i><b>5.2</b> 変数の選択</a>
<ul>
<li class="chapter" data-level="" data-path="線形回帰分析.html"><a href="線形回帰分析.html#データ2-ボストン市内住宅物件価格データ"><i class="fa fa-check"></i>データ2: ボストン市内住宅物件価格データ</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="線形回帰分析.html"><a href="線形回帰分析.html#説明変数に質的変数を含む回帰"><i class="fa fa-check"></i><b>5.3</b> 説明変数に質的変数を含む回帰</a>
<ul>
<li class="chapter" data-level="" data-path="線形回帰分析.html"><a href="線形回帰分析.html#データセット3-高速道路事故データ"><i class="fa fa-check"></i>データセット#3: 高速道路事故データ</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="線形回帰分析.html"><a href="線形回帰分析.html#時系列データ同士の回帰"><i class="fa fa-check"></i><b>5.4</b> 時系列データ同士の回帰</a>
<ul>
<li class="chapter" data-level="" data-path="線形回帰分析.html"><a href="線形回帰分析.html#データセット4-株式市場"><i class="fa fa-check"></i>データセット#4: 株式市場</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="線形回帰分析.html"><a href="線形回帰分析.html#線形モデル"><i class="fa fa-check"></i><b>5.5</b> 線形モデル</a>
<ul>
<li class="chapter" data-level="" data-path="線形回帰分析.html"><a href="線形回帰分析.html#因子モデルの例-交互作用なし"><i class="fa fa-check"></i>2因子モデルの例 (交互作用なし)</a></li>
<li class="chapter" data-level="" data-path="線形回帰分析.html"><a href="線形回帰分析.html#因子モデルの例-交互作用有り"><i class="fa fa-check"></i>2因子モデルの例 (交互作用有り)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="ロジットブロビット回帰分析.html"><a href="ロジットブロビット回帰分析.html"><i class="fa fa-check"></i><b>6</b> ロジット/ブロビット回帰分析</a>
<ul>
<li class="chapter" data-level="6.1" data-path="ロジットブロビット回帰分析.html"><a href="ロジットブロビット回帰分析.html#ロジット回帰分析の基本操作"><i class="fa fa-check"></i><b>6.1</b> ロジット回帰分析の基本操作</a>
<ul>
<li class="chapter" data-level="" data-path="ロジットブロビット回帰分析.html"><a href="ロジットブロビット回帰分析.html#ロジットモデル-シミュレーションデータ"><i class="fa fa-check"></i>ロジットモデル: シミュレーションデータ</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="ロジットブロビット回帰分析.html"><a href="ロジットブロビット回帰分析.html#データ分析例"><i class="fa fa-check"></i><b>6.2</b> データ分析例</a>
<ul>
<li class="chapter" data-level="" data-path="ロジットブロビット回帰分析.html"><a href="ロジットブロビット回帰分析.html#データセット-1-販売プロモーションデータ-仮想"><i class="fa fa-check"></i>データセット (1): 販売プロモーション・データ (仮想)</a></li>
<li class="chapter" data-level="" data-path="ロジットブロビット回帰分析.html"><a href="ロジットブロビット回帰分析.html#データセット-2-個人ローンデフォルトデータ-仮想"><i class="fa fa-check"></i>データセット (2): 個人ローン・デフォルト・データ (仮想)</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="ロジットブロビット回帰分析.html"><a href="ロジットブロビット回帰分析.html#疑似r2の計算"><i class="fa fa-check"></i><b>6.3</b> 疑似R2の計算</a>
<ul>
<li class="chapter" data-level="" data-path="ロジットブロビット回帰分析.html"><a href="ロジットブロビット回帰分析.html#パッケージdesctoolsの利用"><i class="fa fa-check"></i>パッケージDescToolsの利用</a></li>
<li class="chapter" data-level="" data-path="ロジットブロビット回帰分析.html"><a href="ロジットブロビット回帰分析.html#パッケージpsclの利用"><i class="fa fa-check"></i>パッケージpsclの利用</a></li>
<li class="chapter" data-level="" data-path="ロジットブロビット回帰分析.html"><a href="ロジットブロビット回帰分析.html#パッケージperformanceの利用"><i class="fa fa-check"></i>パッケージperformanceの利用</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="ロジットブロビット回帰分析.html"><a href="ロジットブロビット回帰分析.html#関数factorについて"><i class="fa fa-check"></i><b>6.4</b> 関数<code>factor()</code>について</a>
<ul>
<li class="chapter" data-level="" data-path="ロジットブロビット回帰分析.html"><a href="ロジットブロビット回帰分析.html#rでのfactor関数の使い方"><i class="fa fa-check"></i>Rでのfactor関数の使い方</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="判別分析.html"><a href="判別分析.html"><i class="fa fa-check"></i><b>7</b> 判別分析</a>
<ul>
<li class="chapter" data-level="7.1" data-path="判別分析.html"><a href="判別分析.html#線形判別-2次判別---パッケージmassの利用"><i class="fa fa-check"></i><b>7.1</b> 線形判別 &amp; 2次判別 - パッケージMASSの利用</a>
<ul>
<li class="chapter" data-level="" data-path="判別分析.html"><a href="判別分析.html#データセット-1-ビジネススクールの入学許可データ"><i class="fa fa-check"></i>データセット (1): ビジネススクールの入学許可データ</a></li>
<li class="chapter" data-level="" data-path="判別分析.html"><a href="判別分析.html#線形判別-lda"><i class="fa fa-check"></i>線形判別 (LDA)</a></li>
<li class="chapter" data-level="" data-path="判別分析.html"><a href="判別分析.html#次判別-qda"><i class="fa fa-check"></i>2次判別 (QDA)</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="判別分析.html"><a href="判別分析.html#knn法---パッケージclassの利用"><i class="fa fa-check"></i><b>7.2</b> kNN法 - パッケージclassの利用</a></li>
<li class="chapter" data-level="7.3" data-path="判別分析.html"><a href="判別分析.html#データセット分割学習判別評価"><i class="fa fa-check"></i><b>7.3</b> データセット分割・学習・判別・評価</a>
<ul>
<li class="chapter" data-level="" data-path="判別分析.html"><a href="判別分析.html#データセット2-個人ローンデフォルトデータ-仮想"><i class="fa fa-check"></i>データセット2: 個人ローン・デフォルト・データ (仮想)</a></li>
<li class="chapter" data-level="" data-path="判別分析.html"><a href="判別分析.html#線形判別"><i class="fa fa-check"></i>線形判別</a></li>
<li class="chapter" data-level="" data-path="判別分析.html"><a href="判別分析.html#knn法"><i class="fa fa-check"></i>kNN法</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="判別分析.html"><a href="判別分析.html#他パッケージの利用"><i class="fa fa-check"></i><b>7.4</b> 他パッケージの利用</a>
<ul>
<li class="chapter" data-level="" data-path="判別分析.html"><a href="判別分析.html#パッケージklar"><i class="fa fa-check"></i>パッケージ<strong>klaR</strong></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="決定木分析.html"><a href="決定木分析.html"><i class="fa fa-check"></i><b>8</b> 決定木分析</a>
<ul>
<li class="chapter" data-level="8.1" data-path="決定木分析.html"><a href="決定木分析.html#導入-回帰木-vs-線形回帰"><i class="fa fa-check"></i><b>8.1</b> 導入: 回帰木 vs 線形回帰</a>
<ul>
<li class="chapter" data-level="" data-path="決定木分析.html"><a href="決定木分析.html#データセット1-自動車の制動距離"><i class="fa fa-check"></i>データセット1: 自動車の制動距離</a></li>
<li class="chapter" data-level="8.1.1" data-path="決定木分析.html"><a href="決定木分析.html#基本操作-回帰木"><i class="fa fa-check"></i><b>8.1.1</b> 基本操作: 回帰木</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="決定木分析.html"><a href="決定木分析.html#回帰木"><i class="fa fa-check"></i><b>8.2</b> 回帰木</a>
<ul>
<li class="chapter" data-level="" data-path="決定木分析.html"><a href="決定木分析.html#データセット2-ワイン品質データ"><i class="fa fa-check"></i>データセット2: ワイン品質データ</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="決定木分析.html"><a href="決定木分析.html#分類木"><i class="fa fa-check"></i><b>8.3</b> 分類木</a>
<ul>
<li class="chapter" data-level="" data-path="決定木分析.html"><a href="決定木分析.html#データセット3-自動車評価データ"><i class="fa fa-check"></i>データセット3: 自動車評価データ</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="主成分分析-pca.html"><a href="主成分分析-pca.html"><i class="fa fa-check"></i><b>9</b> 主成分分析 (PCA)</a>
<ul>
<li class="chapter" data-level="9.1" data-path="主成分分析-pca.html"><a href="主成分分析-pca.html#基本操作-1"><i class="fa fa-check"></i><b>9.1</b> 基本操作</a>
<ul>
<li class="chapter" data-level="" data-path="主成分分析-pca.html"><a href="主成分分析-pca.html#データセット1-ソニー株価リターン-vs-パナソニック株価リターン"><i class="fa fa-check"></i>データセット1: ソニー株価リターン vs パナソニック株価リターン</a></li>
<li class="chapter" data-level="" data-path="主成分分析-pca.html"><a href="主成分分析-pca.html#データセット2-従業員スキル評価データ仮想"><i class="fa fa-check"></i>データセット2: 従業員スキル評価データ(仮想)</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="主成分分析-pca.html"><a href="主成分分析-pca.html#種類のpca-相関行列ベース-vs-分散共分散行列ベース"><i class="fa fa-check"></i><b>9.2</b> 2種類のPCA: 相関行列ベース vs 分散共分散行列ベース</a>
<ul>
<li class="chapter" data-level="" data-path="主成分分析-pca.html"><a href="主成分分析-pca.html#データセット3-usarrests-data"><i class="fa fa-check"></i>データセット3: USArrests data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="探索的因子分析.html"><a href="探索的因子分析.html"><i class="fa fa-check"></i><b>10</b> 探索的因子分析</a>
<ul>
<li class="chapter" data-level="10.1" data-path="探索的因子分析.html"><a href="探索的因子分析.html#基本操作-2"><i class="fa fa-check"></i><b>10.1</b> 基本操作</a>
<ul>
<li class="chapter" data-level="" data-path="探索的因子分析.html"><a href="探索的因子分析.html#データセット1-従業員評価データ-仮想"><i class="fa fa-check"></i>データセット1: 従業員評価データ (仮想)</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="探索的因子分析.html"><a href="探索的因子分析.html#ライブラリpsychの利用"><i class="fa fa-check"></i><b>10.2</b> ライブラリ<strong>psych</strong>の利用</a></li>
<li class="chapter" data-level="10.3" data-path="探索的因子分析.html"><a href="探索的因子分析.html#因子分析に有用なツール"><i class="fa fa-check"></i><b>10.3</b> 因子分析に有用なツール</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="クラスター分析.html"><a href="クラスター分析.html"><i class="fa fa-check"></i><b>11</b> クラスター分析</a>
<ul>
<li class="chapter" data-level="11.1" data-path="クラスター分析.html"><a href="クラスター分析.html#基本操作-3"><i class="fa fa-check"></i><b>11.1</b> 基本操作</a>
<ul>
<li class="chapter" data-level="" data-path="クラスター分析.html"><a href="クラスター分析.html#階層型クラスタリング"><i class="fa fa-check"></i>階層型クラスタリング</a></li>
<li class="chapter" data-level="" data-path="クラスター分析.html"><a href="クラスター分析.html#k-means法"><i class="fa fa-check"></i>k-means法</a></li>
<li class="chapter" data-level="" data-path="クラスター分析.html"><a href="クラスター分析.html#変数に対するクラスタリング"><i class="fa fa-check"></i>変数に対するクラスタリング</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="クラスター分析.html"><a href="クラスター分析.html#データ分析例-1"><i class="fa fa-check"></i><b>11.2</b> データ分析例</a>
<ul>
<li class="chapter" data-level="" data-path="クラスター分析.html"><a href="クラスター分析.html#データセット-1-ワイン品質データ-再掲"><i class="fa fa-check"></i>データセット (1): ワイン品質データ (再掲)</a></li>
<li class="chapter" data-level="" data-path="クラスター分析.html"><a href="クラスター分析.html#データセット-2-id無し-posデータ"><i class="fa fa-check"></i>データセット (2): (ID無し) POSデータ</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="クラスター分析.html"><a href="クラスター分析.html#発展的なクラスター分析"><i class="fa fa-check"></i><b>11.3</b> 発展的なクラスター分析</a>
<ul>
<li class="chapter" data-level="" data-path="クラスター分析.html"><a href="クラスター分析.html#関数agnes"><i class="fa fa-check"></i>関数<code>agnes</code></a></li>
<li class="chapter" data-level="" data-path="クラスター分析.html"><a href="クラスター分析.html#関数pheatmap"><i class="fa fa-check"></i>関数<code>pheatmap</code></a></li>
<li class="chapter" data-level="" data-path="クラスター分析.html"><a href="クラスター分析.html#関数pam"><i class="fa fa-check"></i>関数<code>pam</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="アソシエーション分析.html"><a href="アソシエーション分析.html"><i class="fa fa-check"></i><b>12</b> アソシエーション分析</a>
<ul>
<li class="chapter" data-level="12.1" data-path="アソシエーション分析.html"><a href="アソシエーション分析.html#基本操作-4"><i class="fa fa-check"></i><b>12.1</b> 基本操作</a>
<ul>
<li class="chapter" data-level="" data-path="アソシエーション分析.html"><a href="アソシエーション分析.html#arulesパッケージの機能"><i class="fa fa-check"></i>arulesパッケージの機能</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="アソシエーション分析.html"><a href="アソシエーション分析.html#データ分析例-2"><i class="fa fa-check"></i><b>12.2</b> データ分析例</a>
<ul>
<li class="chapter" data-level="" data-path="アソシエーション分析.html"><a href="アソシエーション分析.html#データセット-id無し-posデータ-再掲"><i class="fa fa-check"></i>データセット: (ID無し) POSデータ (再掲)</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">ビジネス統計</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="決定木分析" class="section level1 hasAnchor" number="8">
<h1><span class="header-section-number">8</span> 決定木分析<a href="決定木分析.html#決定木分析" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="導入-回帰木-vs-線形回帰" class="section level2 hasAnchor" number="8.1">
<h2><span class="header-section-number">8.1</span> 導入: 回帰木 vs 線形回帰<a href="決定木分析.html#導入-回帰木-vs-線形回帰" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="データセット1-自動車の制動距離" class="section level3 unnumbered hasAnchor">
<h3>データセット1: 自動車の制動距離<a href="決定木分析.html#データセット1-自動車の制動距離" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<pre><code>- cars
   - speed: 自動車の速度
   - dist: ブレーキを踏んだ後で自動車が止まるまでの距離
- Rの標準データセット</code></pre>
<div class="sourceCode" id="cb268"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb268-1"><a href="決定木分析.html#cb268-1" tabindex="-1"></a><span class="co"># cars</span></span>
<span id="cb268-2"><a href="決定木分析.html#cb268-2" tabindex="-1"></a><span class="fu">head</span>(cars)</span>
<span id="cb268-3"><a href="決定木分析.html#cb268-3" tabindex="-1"></a><span class="co">#&gt;   speed dist</span></span>
<span id="cb268-4"><a href="決定木分析.html#cb268-4" tabindex="-1"></a><span class="co">#&gt; 1     4    2</span></span>
<span id="cb268-5"><a href="決定木分析.html#cb268-5" tabindex="-1"></a><span class="co">#&gt; 2     4   10</span></span>
<span id="cb268-6"><a href="決定木分析.html#cb268-6" tabindex="-1"></a><span class="co">#&gt; 3     7    4</span></span>
<span id="cb268-7"><a href="決定木分析.html#cb268-7" tabindex="-1"></a><span class="co">#&gt; 4     7   22</span></span>
<span id="cb268-8"><a href="決定木分析.html#cb268-8" tabindex="-1"></a><span class="co">#&gt; 5     8   16</span></span>
<span id="cb268-9"><a href="決定木分析.html#cb268-9" tabindex="-1"></a><span class="co">#&gt; 6     9   10</span></span>
<span id="cb268-10"><a href="決定木分析.html#cb268-10" tabindex="-1"></a><span class="fu">tail</span>(cars)</span>
<span id="cb268-11"><a href="決定木分析.html#cb268-11" tabindex="-1"></a><span class="co">#&gt;    speed dist</span></span>
<span id="cb268-12"><a href="決定木分析.html#cb268-12" tabindex="-1"></a><span class="co">#&gt; 45    23   54</span></span>
<span id="cb268-13"><a href="決定木分析.html#cb268-13" tabindex="-1"></a><span class="co">#&gt; 46    24   70</span></span>
<span id="cb268-14"><a href="決定木分析.html#cb268-14" tabindex="-1"></a><span class="co">#&gt; 47    24   92</span></span>
<span id="cb268-15"><a href="決定木分析.html#cb268-15" tabindex="-1"></a><span class="co">#&gt; 48    24   93</span></span>
<span id="cb268-16"><a href="決定木分析.html#cb268-16" tabindex="-1"></a><span class="co">#&gt; 49    24  120</span></span>
<span id="cb268-17"><a href="決定木分析.html#cb268-17" tabindex="-1"></a><span class="co">#&gt; 50    25   85</span></span>
<span id="cb268-18"><a href="決定木分析.html#cb268-18" tabindex="-1"></a><span class="co"># cars[&#39;speed&#39;]</span></span>
<span id="cb268-19"><a href="決定木分析.html#cb268-19" tabindex="-1"></a><span class="fu">plot</span>(cars)</span></code></pre></div>
<p><img src="090-DT_files/figure-html/DT1-1-1.png" width="75%" /></p>
<div class="sourceCode" id="cb269"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb269-1"><a href="決定木分析.html#cb269-1" tabindex="-1"></a><span class="fu">cor</span>(cars[<span class="st">&quot;speed&quot;</span>], cars[<span class="st">&quot;dist&quot;</span>])</span>
<span id="cb269-2"><a href="決定木分析.html#cb269-2" tabindex="-1"></a><span class="co">#&gt;            dist</span></span>
<span id="cb269-3"><a href="決定木分析.html#cb269-3" tabindex="-1"></a><span class="co">#&gt; speed 0.8068949</span></span></code></pre></div>
<ul>
<li>単回帰分析</li>
</ul>
<div class="sourceCode" id="cb270"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb270-1"><a href="決定木分析.html#cb270-1" tabindex="-1"></a><span class="co"># 単回帰分析</span></span>
<span id="cb270-2"><a href="決定木分析.html#cb270-2" tabindex="-1"></a>cars_lm <span class="ot">&lt;-</span> <span class="fu">lm</span>(dist <span class="sc">~</span> speed, <span class="at">data =</span> cars)</span>
<span id="cb270-3"><a href="決定木分析.html#cb270-3" tabindex="-1"></a><span class="fu">summary</span>(cars_lm)</span>
<span id="cb270-4"><a href="決定木分析.html#cb270-4" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb270-5"><a href="決定木分析.html#cb270-5" tabindex="-1"></a><span class="co">#&gt; Call:</span></span>
<span id="cb270-6"><a href="決定木分析.html#cb270-6" tabindex="-1"></a><span class="co">#&gt; lm(formula = dist ~ speed, data = cars)</span></span>
<span id="cb270-7"><a href="決定木分析.html#cb270-7" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb270-8"><a href="決定木分析.html#cb270-8" tabindex="-1"></a><span class="co">#&gt; Residuals:</span></span>
<span id="cb270-9"><a href="決定木分析.html#cb270-9" tabindex="-1"></a><span class="co">#&gt;     Min      1Q  Median      3Q     Max </span></span>
<span id="cb270-10"><a href="決定木分析.html#cb270-10" tabindex="-1"></a><span class="co">#&gt; -29.069  -9.525  -2.272   9.215  43.201 </span></span>
<span id="cb270-11"><a href="決定木分析.html#cb270-11" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb270-12"><a href="決定木分析.html#cb270-12" tabindex="-1"></a><span class="co">#&gt; Coefficients:</span></span>
<span id="cb270-13"><a href="決定木分析.html#cb270-13" tabindex="-1"></a><span class="co">#&gt;             Estimate Std. Error t value Pr(&gt;|t|)    </span></span>
<span id="cb270-14"><a href="決定木分析.html#cb270-14" tabindex="-1"></a><span class="co">#&gt; (Intercept) -17.5791     6.7584  -2.601   0.0123 *  </span></span>
<span id="cb270-15"><a href="決定木分析.html#cb270-15" tabindex="-1"></a><span class="co">#&gt; speed         3.9324     0.4155   9.464 1.49e-12 ***</span></span>
<span id="cb270-16"><a href="決定木分析.html#cb270-16" tabindex="-1"></a><span class="co">#&gt; ---</span></span>
<span id="cb270-17"><a href="決定木分析.html#cb270-17" tabindex="-1"></a><span class="co">#&gt; Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</span></span>
<span id="cb270-18"><a href="決定木分析.html#cb270-18" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb270-19"><a href="決定木分析.html#cb270-19" tabindex="-1"></a><span class="co">#&gt; Residual standard error: 15.38 on 48 degrees of freedom</span></span>
<span id="cb270-20"><a href="決定木分析.html#cb270-20" tabindex="-1"></a><span class="co">#&gt; Multiple R-squared:  0.6511, Adjusted R-squared:  0.6438 </span></span>
<span id="cb270-21"><a href="決定木分析.html#cb270-21" tabindex="-1"></a><span class="co">#&gt; F-statistic: 89.57 on 1 and 48 DF,  p-value: 1.49e-12</span></span>
<span id="cb270-22"><a href="決定木分析.html#cb270-22" tabindex="-1"></a></span>
<span id="cb270-23"><a href="決定木分析.html#cb270-23" tabindex="-1"></a><span class="co"># 回帰係数の取り出し</span></span>
<span id="cb270-24"><a href="決定木分析.html#cb270-24" tabindex="-1"></a>cars_lm<span class="sc">$</span>coef</span>
<span id="cb270-25"><a href="決定木分析.html#cb270-25" tabindex="-1"></a><span class="co">#&gt; (Intercept)       speed </span></span>
<span id="cb270-26"><a href="決定木分析.html#cb270-26" tabindex="-1"></a><span class="co">#&gt;  -17.579095    3.932409</span></span>
<span id="cb270-27"><a href="決定木分析.html#cb270-27" tabindex="-1"></a><span class="fu">coefficients</span>(cars_lm)</span>
<span id="cb270-28"><a href="決定木分析.html#cb270-28" tabindex="-1"></a><span class="co">#&gt; (Intercept)       speed </span></span>
<span id="cb270-29"><a href="決定木分析.html#cb270-29" tabindex="-1"></a><span class="co">#&gt;  -17.579095    3.932409</span></span>
<span id="cb270-30"><a href="決定木分析.html#cb270-30" tabindex="-1"></a></span>
<span id="cb270-31"><a href="決定木分析.html#cb270-31" tabindex="-1"></a><span class="co"># 回帰直線の図示</span></span>
<span id="cb270-32"><a href="決定木分析.html#cb270-32" tabindex="-1"></a><span class="fu">plot</span>(cars)</span>
<span id="cb270-33"><a href="決定木分析.html#cb270-33" tabindex="-1"></a><span class="fu">abline</span>(cars_lm)</span></code></pre></div>
<p><img src="090-DT_files/figure-html/unnamed-chunk-3-1.png" width="75%" /></p>
<div class="sourceCode" id="cb271"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb271-1"><a href="決定木分析.html#cb271-1" tabindex="-1"></a><span class="co"># モデル診断（残差プロット等) plot(cars_lm)\t\t 4枚表示: 残差vs Y適合値, 残差</span></span>
<span id="cb271-2"><a href="決定木分析.html#cb271-2" tabindex="-1"></a><span class="co"># vs Q - Qプロット, 残差平方根 vs Y適合値, 残差 vs 影響力(てこ値とCook距離)</span></span></code></pre></div>
<ul>
<li>予測</li>
</ul>
<div class="sourceCode" id="cb272"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb272-1"><a href="決定木分析.html#cb272-1" tabindex="-1"></a><span class="co"># 学習データに対する適合値 (内挿予測)</span></span>
<span id="cb272-2"><a href="決定木分析.html#cb272-2" tabindex="-1"></a>cars_pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(cars_lm)</span>
<span id="cb272-3"><a href="決定木分析.html#cb272-3" tabindex="-1"></a><span class="co"># 残差</span></span>
<span id="cb272-4"><a href="決定木分析.html#cb272-4" tabindex="-1"></a>cars_resd <span class="ot">&lt;-</span> <span class="fu">residuals</span>(cars_lm)</span>
<span id="cb272-5"><a href="決定木分析.html#cb272-5" tabindex="-1"></a><span class="co"># 予測値 vs 残差</span></span>
<span id="cb272-6"><a href="決定木分析.html#cb272-6" tabindex="-1"></a><span class="fu">plot</span>(cars_pred, cars_resd)</span>
<span id="cb272-7"><a href="決定木分析.html#cb272-7" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">h =</span> <span class="dv">0</span>, <span class="at">lty =</span> <span class="dv">2</span>)</span></code></pre></div>
<p><img src="090-DT_files/figure-html/unnamed-chunk-5-1.png" width="75%" /></p>
<div class="sourceCode" id="cb273"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb273-1"><a href="決定木分析.html#cb273-1" tabindex="-1"></a><span class="fu">data.frame</span>(cars, cars_pred, cars_resd)</span>
<span id="cb273-2"><a href="決定木分析.html#cb273-2" tabindex="-1"></a><span class="co">#&gt;    speed dist cars_pred  cars_resd</span></span>
<span id="cb273-3"><a href="決定木分析.html#cb273-3" tabindex="-1"></a><span class="co">#&gt; 1      4    2 -1.849460   3.849460</span></span>
<span id="cb273-4"><a href="決定木分析.html#cb273-4" tabindex="-1"></a><span class="co">#&gt; 2      4   10 -1.849460  11.849460</span></span>
<span id="cb273-5"><a href="決定木分析.html#cb273-5" tabindex="-1"></a><span class="co">#&gt; 3      7    4  9.947766  -5.947766</span></span>
<span id="cb273-6"><a href="決定木分析.html#cb273-6" tabindex="-1"></a><span class="co">#&gt; 4      7   22  9.947766  12.052234</span></span>
<span id="cb273-7"><a href="決定木分析.html#cb273-7" tabindex="-1"></a><span class="co">#&gt; 5      8   16 13.880175   2.119825</span></span>
<span id="cb273-8"><a href="決定木分析.html#cb273-8" tabindex="-1"></a><span class="co">#&gt; 6      9   10 17.812584  -7.812584</span></span>
<span id="cb273-9"><a href="決定木分析.html#cb273-9" tabindex="-1"></a><span class="co">#&gt; 7     10   18 21.744993  -3.744993</span></span>
<span id="cb273-10"><a href="決定木分析.html#cb273-10" tabindex="-1"></a><span class="co">#&gt; 8     10   26 21.744993   4.255007</span></span>
<span id="cb273-11"><a href="決定木分析.html#cb273-11" tabindex="-1"></a><span class="co">#&gt; 9     10   34 21.744993  12.255007</span></span>
<span id="cb273-12"><a href="決定木分析.html#cb273-12" tabindex="-1"></a><span class="co">#&gt; 10    11   17 25.677401  -8.677401</span></span>
<span id="cb273-13"><a href="決定木分析.html#cb273-13" tabindex="-1"></a><span class="co">#&gt; 11    11   28 25.677401   2.322599</span></span>
<span id="cb273-14"><a href="決定木分析.html#cb273-14" tabindex="-1"></a><span class="co">#&gt; 12    12   14 29.609810 -15.609810</span></span>
<span id="cb273-15"><a href="決定木分析.html#cb273-15" tabindex="-1"></a><span class="co">#&gt; 13    12   20 29.609810  -9.609810</span></span>
<span id="cb273-16"><a href="決定木分析.html#cb273-16" tabindex="-1"></a><span class="co">#&gt; 14    12   24 29.609810  -5.609810</span></span>
<span id="cb273-17"><a href="決定木分析.html#cb273-17" tabindex="-1"></a><span class="co">#&gt; 15    12   28 29.609810  -1.609810</span></span>
<span id="cb273-18"><a href="決定木分析.html#cb273-18" tabindex="-1"></a><span class="co">#&gt; 16    13   26 33.542219  -7.542219</span></span>
<span id="cb273-19"><a href="決定木分析.html#cb273-19" tabindex="-1"></a><span class="co">#&gt; 17    13   34 33.542219   0.457781</span></span>
<span id="cb273-20"><a href="決定木分析.html#cb273-20" tabindex="-1"></a><span class="co">#&gt; 18    13   34 33.542219   0.457781</span></span>
<span id="cb273-21"><a href="決定木分析.html#cb273-21" tabindex="-1"></a><span class="co">#&gt; 19    13   46 33.542219  12.457781</span></span>
<span id="cb273-22"><a href="決定木分析.html#cb273-22" tabindex="-1"></a><span class="co">#&gt; 20    14   26 37.474628 -11.474628</span></span>
<span id="cb273-23"><a href="決定木分析.html#cb273-23" tabindex="-1"></a><span class="co">#&gt; 21    14   36 37.474628  -1.474628</span></span>
<span id="cb273-24"><a href="決定木分析.html#cb273-24" tabindex="-1"></a><span class="co">#&gt; 22    14   60 37.474628  22.525372</span></span>
<span id="cb273-25"><a href="決定木分析.html#cb273-25" tabindex="-1"></a><span class="co">#&gt; 23    14   80 37.474628  42.525372</span></span>
<span id="cb273-26"><a href="決定木分析.html#cb273-26" tabindex="-1"></a><span class="co">#&gt; 24    15   20 41.407036 -21.407036</span></span>
<span id="cb273-27"><a href="決定木分析.html#cb273-27" tabindex="-1"></a><span class="co">#&gt; 25    15   26 41.407036 -15.407036</span></span>
<span id="cb273-28"><a href="決定木分析.html#cb273-28" tabindex="-1"></a><span class="co">#&gt; 26    15   54 41.407036  12.592964</span></span>
<span id="cb273-29"><a href="決定木分析.html#cb273-29" tabindex="-1"></a><span class="co">#&gt; 27    16   32 45.339445 -13.339445</span></span>
<span id="cb273-30"><a href="決定木分析.html#cb273-30" tabindex="-1"></a><span class="co">#&gt; 28    16   40 45.339445  -5.339445</span></span>
<span id="cb273-31"><a href="決定木分析.html#cb273-31" tabindex="-1"></a><span class="co">#&gt; 29    17   32 49.271854 -17.271854</span></span>
<span id="cb273-32"><a href="決定木分析.html#cb273-32" tabindex="-1"></a><span class="co">#&gt; 30    17   40 49.271854  -9.271854</span></span>
<span id="cb273-33"><a href="決定木分析.html#cb273-33" tabindex="-1"></a><span class="co">#&gt; 31    17   50 49.271854   0.728146</span></span>
<span id="cb273-34"><a href="決定木分析.html#cb273-34" tabindex="-1"></a><span class="co">#&gt; 32    18   42 53.204263 -11.204263</span></span>
<span id="cb273-35"><a href="決定木分析.html#cb273-35" tabindex="-1"></a><span class="co">#&gt; 33    18   56 53.204263   2.795737</span></span>
<span id="cb273-36"><a href="決定木分析.html#cb273-36" tabindex="-1"></a><span class="co">#&gt; 34    18   76 53.204263  22.795737</span></span>
<span id="cb273-37"><a href="決定木分析.html#cb273-37" tabindex="-1"></a><span class="co">#&gt; 35    18   84 53.204263  30.795737</span></span>
<span id="cb273-38"><a href="決定木分析.html#cb273-38" tabindex="-1"></a><span class="co">#&gt; 36    19   36 57.136672 -21.136672</span></span>
<span id="cb273-39"><a href="決定木分析.html#cb273-39" tabindex="-1"></a><span class="co">#&gt; 37    19   46 57.136672 -11.136672</span></span>
<span id="cb273-40"><a href="決定木分析.html#cb273-40" tabindex="-1"></a><span class="co">#&gt; 38    19   68 57.136672  10.863328</span></span>
<span id="cb273-41"><a href="決定木分析.html#cb273-41" tabindex="-1"></a><span class="co">#&gt; 39    20   32 61.069080 -29.069080</span></span>
<span id="cb273-42"><a href="決定木分析.html#cb273-42" tabindex="-1"></a><span class="co">#&gt; 40    20   48 61.069080 -13.069080</span></span>
<span id="cb273-43"><a href="決定木分析.html#cb273-43" tabindex="-1"></a><span class="co">#&gt; 41    20   52 61.069080  -9.069080</span></span>
<span id="cb273-44"><a href="決定木分析.html#cb273-44" tabindex="-1"></a><span class="co">#&gt; 42    20   56 61.069080  -5.069080</span></span>
<span id="cb273-45"><a href="決定木分析.html#cb273-45" tabindex="-1"></a><span class="co">#&gt; 43    20   64 61.069080   2.930920</span></span>
<span id="cb273-46"><a href="決定木分析.html#cb273-46" tabindex="-1"></a><span class="co">#&gt; 44    22   66 68.933898  -2.933898</span></span>
<span id="cb273-47"><a href="決定木分析.html#cb273-47" tabindex="-1"></a><span class="co">#&gt; 45    23   54 72.866307 -18.866307</span></span>
<span id="cb273-48"><a href="決定木分析.html#cb273-48" tabindex="-1"></a><span class="co">#&gt; 46    24   70 76.798715  -6.798715</span></span>
<span id="cb273-49"><a href="決定木分析.html#cb273-49" tabindex="-1"></a><span class="co">#&gt; 47    24   92 76.798715  15.201285</span></span>
<span id="cb273-50"><a href="決定木分析.html#cb273-50" tabindex="-1"></a><span class="co">#&gt; 48    24   93 76.798715  16.201285</span></span>
<span id="cb273-51"><a href="決定木分析.html#cb273-51" tabindex="-1"></a><span class="co">#&gt; 49    24  120 76.798715  43.201285</span></span>
<span id="cb273-52"><a href="決定木分析.html#cb273-52" tabindex="-1"></a><span class="co">#&gt; 50    25   85 80.731124   4.268876</span></span></code></pre></div>
<div class="sourceCode" id="cb274"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb274-1"><a href="決定木分析.html#cb274-1" tabindex="-1"></a><span class="co"># テストデータ(未学習データ)に対する予測 (外挿予測)</span></span>
<span id="cb274-2"><a href="決定木分析.html#cb274-2" tabindex="-1"></a>testdat <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">speed =</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">21</span>))</span>
<span id="cb274-3"><a href="決定木分析.html#cb274-3" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">predict</span>(cars_lm, <span class="at">newdata =</span> testdat))</span>
<span id="cb274-4"><a href="決定木分析.html#cb274-4" tabindex="-1"></a><span class="co">#&gt;         1         2         3 </span></span>
<span id="cb274-5"><a href="決定木分析.html#cb274-5" tabindex="-1"></a><span class="co">#&gt;  2.082949  6.015358 65.001489</span></span></code></pre></div>
</div>
<div id="基本操作-回帰木" class="section level3 hasAnchor" number="8.1.1">
<h3><span class="header-section-number">8.1.1</span> 基本操作: 回帰木<a href="決定木分析.html#基本操作-回帰木" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>回帰木, 分類木ともに,
パッケージ<strong>rpart</strong>の関数<code>rpart()</code>を適用する.</p>
<div class="sourceCode" id="cb275"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb275-1"><a href="決定木分析.html#cb275-1" tabindex="-1"></a><span class="fu">library</span>(rpart)</span>
<span id="cb275-2"><a href="決定木分析.html#cb275-2" tabindex="-1"></a>cars_rp <span class="ot">&lt;-</span> <span class="fu">rpart</span>(dist <span class="sc">~</span> speed, <span class="at">data =</span> cars)</span>
<span id="cb275-3"><a href="決定木分析.html#cb275-3" tabindex="-1"></a><span class="fu">summary</span>(cars_rp)  <span class="co"># ==&gt; 葉3枚</span></span>
<span id="cb275-4"><a href="決定木分析.html#cb275-4" tabindex="-1"></a><span class="co">#&gt; Call:</span></span>
<span id="cb275-5"><a href="決定木分析.html#cb275-5" tabindex="-1"></a><span class="co">#&gt; rpart(formula = dist ~ speed, data = cars)</span></span>
<span id="cb275-6"><a href="決定木分析.html#cb275-6" tabindex="-1"></a><span class="co">#&gt;   n= 50 </span></span>
<span id="cb275-7"><a href="決定木分析.html#cb275-7" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb275-8"><a href="決定木分析.html#cb275-8" tabindex="-1"></a><span class="co">#&gt;          CP nsplit rel error    xerror      xstd</span></span>
<span id="cb275-9"><a href="決定木分析.html#cb275-9" tabindex="-1"></a><span class="co">#&gt; 1 0.4676398      0 1.0000000 1.0568962 0.2252315</span></span>
<span id="cb275-10"><a href="決定木分析.html#cb275-10" tabindex="-1"></a><span class="co">#&gt; 2 0.1104944      1 0.5323602 0.7027958 0.1707204</span></span>
<span id="cb275-11"><a href="決定木分析.html#cb275-11" tabindex="-1"></a><span class="co">#&gt; 3 0.0100000      2 0.4218658 0.5144673 0.1299685</span></span>
<span id="cb275-12"><a href="決定木分析.html#cb275-12" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb275-13"><a href="決定木分析.html#cb275-13" tabindex="-1"></a><span class="co">#&gt; Variable importance</span></span>
<span id="cb275-14"><a href="決定木分析.html#cb275-14" tabindex="-1"></a><span class="co">#&gt; speed </span></span>
<span id="cb275-15"><a href="決定木分析.html#cb275-15" tabindex="-1"></a><span class="co">#&gt;   100 </span></span>
<span id="cb275-16"><a href="決定木分析.html#cb275-16" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb275-17"><a href="決定木分析.html#cb275-17" tabindex="-1"></a><span class="co">#&gt; Node number 1: 50 observations,    complexity param=0.4676398</span></span>
<span id="cb275-18"><a href="決定木分析.html#cb275-18" tabindex="-1"></a><span class="co">#&gt;   mean=42.98, MSE=650.7796 </span></span>
<span id="cb275-19"><a href="決定木分析.html#cb275-19" tabindex="-1"></a><span class="co">#&gt;   left son=2 (31 obs) right son=3 (19 obs)</span></span>
<span id="cb275-20"><a href="決定木分析.html#cb275-20" tabindex="-1"></a><span class="co">#&gt;   Primary splits:</span></span>
<span id="cb275-21"><a href="決定木分析.html#cb275-21" tabindex="-1"></a><span class="co">#&gt;       speed &lt; 17.5 to the left,  improve=0.4676398, (0 missing)</span></span>
<span id="cb275-22"><a href="決定木分析.html#cb275-22" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb275-23"><a href="決定木分析.html#cb275-23" tabindex="-1"></a><span class="co">#&gt; Node number 2: 31 observations,    complexity param=0.1104944</span></span>
<span id="cb275-24"><a href="決定木分析.html#cb275-24" tabindex="-1"></a><span class="co">#&gt;   mean=29.32258, MSE=267.9605 </span></span>
<span id="cb275-25"><a href="決定木分析.html#cb275-25" tabindex="-1"></a><span class="co">#&gt;   left son=4 (15 obs) right son=5 (16 obs)</span></span>
<span id="cb275-26"><a href="決定木分析.html#cb275-26" tabindex="-1"></a><span class="co">#&gt;   Primary splits:</span></span>
<span id="cb275-27"><a href="決定木分析.html#cb275-27" tabindex="-1"></a><span class="co">#&gt;       speed &lt; 12.5 to the left,  improve=0.4328244, (0 missing)</span></span>
<span id="cb275-28"><a href="決定木分析.html#cb275-28" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb275-29"><a href="決定木分析.html#cb275-29" tabindex="-1"></a><span class="co">#&gt; Node number 3: 19 observations</span></span>
<span id="cb275-30"><a href="決定木分析.html#cb275-30" tabindex="-1"></a><span class="co">#&gt;   mean=65.26316, MSE=474.5097 </span></span>
<span id="cb275-31"><a href="決定木分析.html#cb275-31" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb275-32"><a href="決定木分析.html#cb275-32" tabindex="-1"></a><span class="co">#&gt; Node number 4: 15 observations</span></span>
<span id="cb275-33"><a href="決定木分析.html#cb275-33" tabindex="-1"></a><span class="co">#&gt;   mean=18.2, MSE=78.42667 </span></span>
<span id="cb275-34"><a href="決定木分析.html#cb275-34" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb275-35"><a href="決定木分析.html#cb275-35" tabindex="-1"></a><span class="co">#&gt; Node number 5: 16 observations</span></span>
<span id="cb275-36"><a href="決定木分析.html#cb275-36" tabindex="-1"></a><span class="co">#&gt;   mean=39.75, MSE=220.9375</span></span>
<span id="cb275-37"><a href="決定木分析.html#cb275-37" tabindex="-1"></a><span class="fu">plot</span>(cars_rp, <span class="at">uniform =</span> T, <span class="at">margin =</span> <span class="fl">0.05</span>)</span>
<span id="cb275-38"><a href="決定木分析.html#cb275-38" tabindex="-1"></a><span class="fu">text</span>(cars_rp, <span class="at">all =</span> T, <span class="at">use.n =</span> T)</span></code></pre></div>
<p><img src="090-DT_files/figure-html/DT1-2-1.png" width="75%" /></p>
<ul>
<li>予測</li>
</ul>
<div class="sourceCode" id="cb276"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb276-1"><a href="決定木分析.html#cb276-1" tabindex="-1"></a><span class="co"># 学習用データに対する適合値 (内挿予測)</span></span>
<span id="cb276-2"><a href="決定木分析.html#cb276-2" tabindex="-1"></a>cars_rp_pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(cars_rp)</span>
<span id="cb276-3"><a href="決定木分析.html#cb276-3" tabindex="-1"></a>cars_rp_fitted <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(cars<span class="sc">$</span>speed, cars_rp_pred)</span>
<span id="cb276-4"><a href="決定木分析.html#cb276-4" tabindex="-1"></a><span class="fu">plot</span>(cars<span class="sc">$</span>speed, cars<span class="sc">$</span>dist)</span>
<span id="cb276-5"><a href="決定木分析.html#cb276-5" tabindex="-1"></a><span class="fu">lines</span>(cars_rp_fitted, <span class="at">type =</span> <span class="st">&quot;s&quot;</span>)</span></code></pre></div>
<p><img src="090-DT_files/figure-html/unnamed-chunk-9-1.png" width="75%" /></p>
<div class="sourceCode" id="cb277"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb277-1"><a href="決定木分析.html#cb277-1" tabindex="-1"></a><span class="co"># テストデータに対する予測値 (外挿予測)</span></span>
<span id="cb277-2"><a href="決定木分析.html#cb277-2" tabindex="-1"></a><span class="fu">predict</span>(cars_rp, <span class="at">newdata =</span> testdat)</span>
<span id="cb277-3"><a href="決定木分析.html#cb277-3" tabindex="-1"></a><span class="co">#&gt;        1        2        3 </span></span>
<span id="cb277-4"><a href="決定木分析.html#cb277-4" tabindex="-1"></a><span class="co">#&gt; 18.20000 18.20000 65.26316</span></span></code></pre></div>
<div class="sourceCode" id="cb278"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb278-1"><a href="決定木分析.html#cb278-1" tabindex="-1"></a><span class="co"># 観測値, 線形回帰の適合値, 回帰木の適合値</span></span>
<span id="cb278-2"><a href="決定木分析.html#cb278-2" tabindex="-1"></a><span class="fu">data.frame</span>(cars, cars_pred, cars_rp_fitted)</span>
<span id="cb278-3"><a href="決定木分析.html#cb278-3" tabindex="-1"></a><span class="co">#&gt;    speed dist cars_pred cars.speed cars_rp_pred</span></span>
<span id="cb278-4"><a href="決定木分析.html#cb278-4" tabindex="-1"></a><span class="co">#&gt; 1      4    2 -1.849460          4     18.20000</span></span>
<span id="cb278-5"><a href="決定木分析.html#cb278-5" tabindex="-1"></a><span class="co">#&gt; 2      4   10 -1.849460          4     18.20000</span></span>
<span id="cb278-6"><a href="決定木分析.html#cb278-6" tabindex="-1"></a><span class="co">#&gt; 3      7    4  9.947766          7     18.20000</span></span>
<span id="cb278-7"><a href="決定木分析.html#cb278-7" tabindex="-1"></a><span class="co">#&gt; 4      7   22  9.947766          7     18.20000</span></span>
<span id="cb278-8"><a href="決定木分析.html#cb278-8" tabindex="-1"></a><span class="co">#&gt; 5      8   16 13.880175          8     18.20000</span></span>
<span id="cb278-9"><a href="決定木分析.html#cb278-9" tabindex="-1"></a><span class="co">#&gt; 6      9   10 17.812584          9     18.20000</span></span>
<span id="cb278-10"><a href="決定木分析.html#cb278-10" tabindex="-1"></a><span class="co">#&gt; 7     10   18 21.744993         10     18.20000</span></span>
<span id="cb278-11"><a href="決定木分析.html#cb278-11" tabindex="-1"></a><span class="co">#&gt; 8     10   26 21.744993         10     18.20000</span></span>
<span id="cb278-12"><a href="決定木分析.html#cb278-12" tabindex="-1"></a><span class="co">#&gt; 9     10   34 21.744993         10     18.20000</span></span>
<span id="cb278-13"><a href="決定木分析.html#cb278-13" tabindex="-1"></a><span class="co">#&gt; 10    11   17 25.677401         11     18.20000</span></span>
<span id="cb278-14"><a href="決定木分析.html#cb278-14" tabindex="-1"></a><span class="co">#&gt; 11    11   28 25.677401         11     18.20000</span></span>
<span id="cb278-15"><a href="決定木分析.html#cb278-15" tabindex="-1"></a><span class="co">#&gt; 12    12   14 29.609810         12     18.20000</span></span>
<span id="cb278-16"><a href="決定木分析.html#cb278-16" tabindex="-1"></a><span class="co">#&gt; 13    12   20 29.609810         12     18.20000</span></span>
<span id="cb278-17"><a href="決定木分析.html#cb278-17" tabindex="-1"></a><span class="co">#&gt; 14    12   24 29.609810         12     18.20000</span></span>
<span id="cb278-18"><a href="決定木分析.html#cb278-18" tabindex="-1"></a><span class="co">#&gt; 15    12   28 29.609810         12     18.20000</span></span>
<span id="cb278-19"><a href="決定木分析.html#cb278-19" tabindex="-1"></a><span class="co">#&gt; 16    13   26 33.542219         13     39.75000</span></span>
<span id="cb278-20"><a href="決定木分析.html#cb278-20" tabindex="-1"></a><span class="co">#&gt; 17    13   34 33.542219         13     39.75000</span></span>
<span id="cb278-21"><a href="決定木分析.html#cb278-21" tabindex="-1"></a><span class="co">#&gt; 18    13   34 33.542219         13     39.75000</span></span>
<span id="cb278-22"><a href="決定木分析.html#cb278-22" tabindex="-1"></a><span class="co">#&gt; 19    13   46 33.542219         13     39.75000</span></span>
<span id="cb278-23"><a href="決定木分析.html#cb278-23" tabindex="-1"></a><span class="co">#&gt; 20    14   26 37.474628         14     39.75000</span></span>
<span id="cb278-24"><a href="決定木分析.html#cb278-24" tabindex="-1"></a><span class="co">#&gt; 21    14   36 37.474628         14     39.75000</span></span>
<span id="cb278-25"><a href="決定木分析.html#cb278-25" tabindex="-1"></a><span class="co">#&gt; 22    14   60 37.474628         14     39.75000</span></span>
<span id="cb278-26"><a href="決定木分析.html#cb278-26" tabindex="-1"></a><span class="co">#&gt; 23    14   80 37.474628         14     39.75000</span></span>
<span id="cb278-27"><a href="決定木分析.html#cb278-27" tabindex="-1"></a><span class="co">#&gt; 24    15   20 41.407036         15     39.75000</span></span>
<span id="cb278-28"><a href="決定木分析.html#cb278-28" tabindex="-1"></a><span class="co">#&gt; 25    15   26 41.407036         15     39.75000</span></span>
<span id="cb278-29"><a href="決定木分析.html#cb278-29" tabindex="-1"></a><span class="co">#&gt; 26    15   54 41.407036         15     39.75000</span></span>
<span id="cb278-30"><a href="決定木分析.html#cb278-30" tabindex="-1"></a><span class="co">#&gt; 27    16   32 45.339445         16     39.75000</span></span>
<span id="cb278-31"><a href="決定木分析.html#cb278-31" tabindex="-1"></a><span class="co">#&gt; 28    16   40 45.339445         16     39.75000</span></span>
<span id="cb278-32"><a href="決定木分析.html#cb278-32" tabindex="-1"></a><span class="co">#&gt; 29    17   32 49.271854         17     39.75000</span></span>
<span id="cb278-33"><a href="決定木分析.html#cb278-33" tabindex="-1"></a><span class="co">#&gt; 30    17   40 49.271854         17     39.75000</span></span>
<span id="cb278-34"><a href="決定木分析.html#cb278-34" tabindex="-1"></a><span class="co">#&gt; 31    17   50 49.271854         17     39.75000</span></span>
<span id="cb278-35"><a href="決定木分析.html#cb278-35" tabindex="-1"></a><span class="co">#&gt; 32    18   42 53.204263         18     65.26316</span></span>
<span id="cb278-36"><a href="決定木分析.html#cb278-36" tabindex="-1"></a><span class="co">#&gt; 33    18   56 53.204263         18     65.26316</span></span>
<span id="cb278-37"><a href="決定木分析.html#cb278-37" tabindex="-1"></a><span class="co">#&gt; 34    18   76 53.204263         18     65.26316</span></span>
<span id="cb278-38"><a href="決定木分析.html#cb278-38" tabindex="-1"></a><span class="co">#&gt; 35    18   84 53.204263         18     65.26316</span></span>
<span id="cb278-39"><a href="決定木分析.html#cb278-39" tabindex="-1"></a><span class="co">#&gt; 36    19   36 57.136672         19     65.26316</span></span>
<span id="cb278-40"><a href="決定木分析.html#cb278-40" tabindex="-1"></a><span class="co">#&gt; 37    19   46 57.136672         19     65.26316</span></span>
<span id="cb278-41"><a href="決定木分析.html#cb278-41" tabindex="-1"></a><span class="co">#&gt; 38    19   68 57.136672         19     65.26316</span></span>
<span id="cb278-42"><a href="決定木分析.html#cb278-42" tabindex="-1"></a><span class="co">#&gt; 39    20   32 61.069080         20     65.26316</span></span>
<span id="cb278-43"><a href="決定木分析.html#cb278-43" tabindex="-1"></a><span class="co">#&gt; 40    20   48 61.069080         20     65.26316</span></span>
<span id="cb278-44"><a href="決定木分析.html#cb278-44" tabindex="-1"></a><span class="co">#&gt; 41    20   52 61.069080         20     65.26316</span></span>
<span id="cb278-45"><a href="決定木分析.html#cb278-45" tabindex="-1"></a><span class="co">#&gt; 42    20   56 61.069080         20     65.26316</span></span>
<span id="cb278-46"><a href="決定木分析.html#cb278-46" tabindex="-1"></a><span class="co">#&gt; 43    20   64 61.069080         20     65.26316</span></span>
<span id="cb278-47"><a href="決定木分析.html#cb278-47" tabindex="-1"></a><span class="co">#&gt; 44    22   66 68.933898         22     65.26316</span></span>
<span id="cb278-48"><a href="決定木分析.html#cb278-48" tabindex="-1"></a><span class="co">#&gt; 45    23   54 72.866307         23     65.26316</span></span>
<span id="cb278-49"><a href="決定木分析.html#cb278-49" tabindex="-1"></a><span class="co">#&gt; 46    24   70 76.798715         24     65.26316</span></span>
<span id="cb278-50"><a href="決定木分析.html#cb278-50" tabindex="-1"></a><span class="co">#&gt; 47    24   92 76.798715         24     65.26316</span></span>
<span id="cb278-51"><a href="決定木分析.html#cb278-51" tabindex="-1"></a><span class="co">#&gt; 48    24   93 76.798715         24     65.26316</span></span>
<span id="cb278-52"><a href="決定木分析.html#cb278-52" tabindex="-1"></a><span class="co">#&gt; 49    24  120 76.798715         24     65.26316</span></span>
<span id="cb278-53"><a href="決定木分析.html#cb278-53" tabindex="-1"></a><span class="co">#&gt; 50    25   85 80.731124         25     65.26316</span></span></code></pre></div>
</div>
</div>
<div id="回帰木" class="section level2 hasAnchor" number="8.2">
<h2><span class="header-section-number">8.2</span> 回帰木<a href="決定木分析.html#回帰木" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="データセット2-ワイン品質データ" class="section level3 unnumbered hasAnchor">
<h3>データセット2: ワイン品質データ<a href="決定木分析.html#データセット2-ワイン品質データ" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<pre><code>- winequality-white.csv
   - fixed acidity: 酢酸濃度
   - volitle acidity: 揮発酸濃度
   - citric acidity: クエン酸濃度
   - chlorides: 塩化物
   - sulfur dioxide: 二酸化硫黄
   - sulphate: 硫酸塩
   - fixed acidity: 酒石酸含有量（g/dm3)
   - volatile acidity: 酢酸含有量（g/dm3)
   - citric acid: クエン酸含有量（g/dm3)
   - residual sugar: 残留糖分含有量（g/dm3）
   - chlorides: 塩化ナトリウム含有量（g/dm3)
   - free sulfur dioxide: 遊離亜硫酸含有量（mg/dm3）
   - total sulfur dioxide: 総亜硫酸含有量（mg/dm3）
   - density: 密度（g/dm3)
   - pH:    pH
   - sulphates: 硫酸カリウム含有量（g/dm3）
   - alcohol: アルコール度数（% vol.）
   - quality: ワインの品質 (0 (very bad) -- 10 (excellent))</code></pre>
<p>全データセットを学習用とテスト用にランダムに分割.</p>
<div class="sourceCode" id="cb280"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb280-1"><a href="決定木分析.html#cb280-1" tabindex="-1"></a>wine <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;winequality-white.csv&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;;&quot;</span>, <span class="at">skip =</span> <span class="dv">1</span>, <span class="at">header =</span> T)</span>
<span id="cb280-2"><a href="決定木分析.html#cb280-2" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">100</span>)</span>
<span id="cb280-3"><a href="決定木分析.html#cb280-3" tabindex="-1"></a>smpl_idx <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(wine), <span class="dv">3000</span>)  <span class="co"># 元データ(行番号)から3000件を非復元抽出</span></span>
<span id="cb280-4"><a href="決定木分析.html#cb280-4" tabindex="-1"></a>wine_train <span class="ot">&lt;-</span> wine[smpl_idx, ]  <span class="co"># 学習用データセット</span></span>
<span id="cb280-5"><a href="決定木分析.html#cb280-5" tabindex="-1"></a>wine_test <span class="ot">&lt;-</span> wine[<span class="sc">-</span>smpl_idx, ]  <span class="co"># テスト用データセット</span></span>
<span id="cb280-6"><a href="決定木分析.html#cb280-6" tabindex="-1"></a><span class="fu">str</span>(wine)</span>
<span id="cb280-7"><a href="決定木分析.html#cb280-7" tabindex="-1"></a><span class="co">#&gt; &#39;data.frame&#39;:    4898 obs. of  12 variables:</span></span>
<span id="cb280-8"><a href="決定木分析.html#cb280-8" tabindex="-1"></a><span class="co">#&gt;  $ fixed.acidity       : num  7 6.3 8.1 7.2 7.2 8.1 6.2 7 6.3 8.1 ...</span></span>
<span id="cb280-9"><a href="決定木分析.html#cb280-9" tabindex="-1"></a><span class="co">#&gt;  $ volatile.acidity    : num  0.27 0.3 0.28 0.23 0.23 0.28 0.32 0.27 0.3 0.22 ...</span></span>
<span id="cb280-10"><a href="決定木分析.html#cb280-10" tabindex="-1"></a><span class="co">#&gt;  $ citric.acid         : num  0.36 0.34 0.4 0.32 0.32 0.4 0.16 0.36 0.34 0.43 ...</span></span>
<span id="cb280-11"><a href="決定木分析.html#cb280-11" tabindex="-1"></a><span class="co">#&gt;  $ residual.sugar      : num  20.7 1.6 6.9 8.5 8.5 6.9 7 20.7 1.6 1.5 ...</span></span>
<span id="cb280-12"><a href="決定木分析.html#cb280-12" tabindex="-1"></a><span class="co">#&gt;  $ chlorides           : num  0.045 0.049 0.05 0.058 0.058 0.05 0.045 0.045 0.049 0.044 ...</span></span>
<span id="cb280-13"><a href="決定木分析.html#cb280-13" tabindex="-1"></a><span class="co">#&gt;  $ free.sulfur.dioxide : num  45 14 30 47 47 30 30 45 14 28 ...</span></span>
<span id="cb280-14"><a href="決定木分析.html#cb280-14" tabindex="-1"></a><span class="co">#&gt;  $ total.sulfur.dioxide: num  170 132 97 186 186 97 136 170 132 129 ...</span></span>
<span id="cb280-15"><a href="決定木分析.html#cb280-15" tabindex="-1"></a><span class="co">#&gt;  $ density             : num  1.001 0.994 0.995 0.996 0.996 ...</span></span>
<span id="cb280-16"><a href="決定木分析.html#cb280-16" tabindex="-1"></a><span class="co">#&gt;  $ pH                  : num  3 3.3 3.26 3.19 3.19 3.26 3.18 3 3.3 3.22 ...</span></span>
<span id="cb280-17"><a href="決定木分析.html#cb280-17" tabindex="-1"></a><span class="co">#&gt;  $ sulphates           : num  0.45 0.49 0.44 0.4 0.4 0.44 0.47 0.45 0.49 0.45 ...</span></span>
<span id="cb280-18"><a href="決定木分析.html#cb280-18" tabindex="-1"></a><span class="co">#&gt;  $ alcohol             : num  8.8 9.5 10.1 9.9 9.9 10.1 9.6 8.8 9.5 11 ...</span></span>
<span id="cb280-19"><a href="決定木分析.html#cb280-19" tabindex="-1"></a><span class="co">#&gt;  $ quality             : int  6 6 6 6 6 6 6 6 6 6 ...</span></span>
<span id="cb280-20"><a href="決定木分析.html#cb280-20" tabindex="-1"></a><span class="fu">hist</span>(wine<span class="sc">$</span>quality)</span></code></pre></div>
<p><img src="090-DT_files/figure-html/DT2-1-1.png" width="75%" /></p>
<div class="sourceCode" id="cb281"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb281-1"><a href="決定木分析.html#cb281-1" tabindex="-1"></a><span class="fu">library</span>(rpart)</span>
<span id="cb281-2"><a href="決定木分析.html#cb281-2" tabindex="-1"></a>wine_rp <span class="ot">&lt;-</span> <span class="fu">rpart</span>(quality <span class="sc">~</span> ., <span class="at">data =</span> wine_train)  <span class="co"># quality以外の変数を説明変数に使用</span></span>
<span id="cb281-3"><a href="決定木分析.html#cb281-3" tabindex="-1"></a>wine_rp</span>
<span id="cb281-4"><a href="決定木分析.html#cb281-4" tabindex="-1"></a><span class="co">#&gt; n= 3000 </span></span>
<span id="cb281-5"><a href="決定木分析.html#cb281-5" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb281-6"><a href="決定木分析.html#cb281-6" tabindex="-1"></a><span class="co">#&gt; node), split, n, deviance, yval</span></span>
<span id="cb281-7"><a href="決定木分析.html#cb281-7" tabindex="-1"></a><span class="co">#&gt;       * denotes terminal node</span></span>
<span id="cb281-8"><a href="決定木分析.html#cb281-8" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb281-9"><a href="決定木分析.html#cb281-9" tabindex="-1"></a><span class="co">#&gt;  1) root 3000 2320.0400 5.880333  </span></span>
<span id="cb281-10"><a href="決定木分析.html#cb281-10" tabindex="-1"></a><span class="co">#&gt;    2) alcohol&lt; 10.85 1883 1106.7690 5.612852  </span></span>
<span id="cb281-11"><a href="決定木分析.html#cb281-11" tabindex="-1"></a><span class="co">#&gt;      4) volatile.acidity&gt;=0.2525 985  464.4934 5.358376 *</span></span>
<span id="cb281-12"><a href="決定木分析.html#cb281-12" tabindex="-1"></a><span class="co">#&gt;      5) volatile.acidity&lt; 0.2525 898  508.5223 5.891982  </span></span>
<span id="cb281-13"><a href="決定木分析.html#cb281-13" tabindex="-1"></a><span class="co">#&gt;       10) volatile.acidity&gt;=0.2075 437  217.9405 5.720824 *</span></span>
<span id="cb281-14"><a href="決定木分析.html#cb281-14" tabindex="-1"></a><span class="co">#&gt;       11) volatile.acidity&lt; 0.2075 461  265.6443 6.054230  </span></span>
<span id="cb281-15"><a href="決定木分析.html#cb281-15" tabindex="-1"></a><span class="co">#&gt;         22) residual.sugar&lt; 12.575 369  183.0244 5.926829 *</span></span>
<span id="cb281-16"><a href="決定木分析.html#cb281-16" tabindex="-1"></a><span class="co">#&gt;         23) residual.sugar&gt;=12.575 92   52.6087 6.565217 *</span></span>
<span id="cb281-17"><a href="決定木分析.html#cb281-17" tabindex="-1"></a><span class="co">#&gt;    3) alcohol&gt;=10.85 1117  851.4396 6.331244  </span></span>
<span id="cb281-18"><a href="決定木分析.html#cb281-18" tabindex="-1"></a><span class="co">#&gt;      6) free.sulfur.dioxide&lt; 11.5 66   67.5303 5.378788 *</span></span>
<span id="cb281-19"><a href="決定木分析.html#cb281-19" tabindex="-1"></a><span class="co">#&gt;      7) free.sulfur.dioxide&gt;=11.5 1051  720.2759 6.391056  </span></span>
<span id="cb281-20"><a href="決定木分析.html#cb281-20" tabindex="-1"></a><span class="co">#&gt;       14) alcohol&lt; 12.45 795  512.6717 6.275472 *</span></span>
<span id="cb281-21"><a href="決定木分析.html#cb281-21" tabindex="-1"></a><span class="co">#&gt;       15) alcohol&gt;=12.45 256  164.0000 6.750000 *</span></span>
<span id="cb281-22"><a href="決定木分析.html#cb281-22" tabindex="-1"></a></span>
<span id="cb281-23"><a href="決定木分析.html#cb281-23" tabindex="-1"></a><span class="co"># 可視化</span></span>
<span id="cb281-24"><a href="決定木分析.html#cb281-24" tabindex="-1"></a><span class="fu">library</span>(rpart.plot)</span>
<span id="cb281-25"><a href="決定木分析.html#cb281-25" tabindex="-1"></a><span class="fu">rpart.plot</span>(wine_rp, <span class="at">digit =</span> <span class="dv">3</span>)</span></code></pre></div>
<p><img src="090-DT_files/figure-html/unnamed-chunk-12-1.png" width="75%" /></p>
<div class="sourceCode" id="cb282"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb282-1"><a href="決定木分析.html#cb282-1" tabindex="-1"></a><span class="fu">rpart.plot</span>(wine_rp, <span class="at">digit =</span> <span class="dv">4</span>, <span class="at">fallen.leaves =</span> T, <span class="at">type =</span> <span class="dv">3</span>, <span class="at">extra =</span> <span class="dv">101</span>)</span></code></pre></div>
<p><img src="090-DT_files/figure-html/unnamed-chunk-12-2.png" width="75%" /></p>
<div class="sourceCode" id="cb283"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb283-1"><a href="決定木分析.html#cb283-1" tabindex="-1"></a><span class="co"># 学習データによる予測の精度</span></span>
<span id="cb283-2"><a href="決定木分析.html#cb283-2" tabindex="-1"></a>wine_rp_train <span class="ot">&lt;-</span> <span class="fu">predict</span>(wine_rp)</span>
<span id="cb283-3"><a href="決定木分析.html#cb283-3" tabindex="-1"></a><span class="fu">cor</span>(wine_rp_train, wine_train<span class="sc">$</span>quality)</span>
<span id="cb283-4"><a href="決定木分析.html#cb283-4" tabindex="-1"></a><span class="co">#&gt; [1] 0.5324631</span></span>
<span id="cb283-5"><a href="決定木分析.html#cb283-5" tabindex="-1"></a></span>
<span id="cb283-6"><a href="決定木分析.html#cb283-6" tabindex="-1"></a><span class="fu">printcp</span>(wine_rp)</span>
<span id="cb283-7"><a href="決定木分析.html#cb283-7" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb283-8"><a href="決定木分析.html#cb283-8" tabindex="-1"></a><span class="co">#&gt; Regression tree:</span></span>
<span id="cb283-9"><a href="決定木分析.html#cb283-9" tabindex="-1"></a><span class="co">#&gt; rpart(formula = quality ~ ., data = wine_train)</span></span>
<span id="cb283-10"><a href="決定木分析.html#cb283-10" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb283-11"><a href="決定木分析.html#cb283-11" tabindex="-1"></a><span class="co">#&gt; Variables actually used in tree construction:</span></span>
<span id="cb283-12"><a href="決定木分析.html#cb283-12" tabindex="-1"></a><span class="co">#&gt; [1] alcohol             free.sulfur.dioxide residual.sugar     </span></span>
<span id="cb283-13"><a href="決定木分析.html#cb283-13" tabindex="-1"></a><span class="co">#&gt; [4] volatile.acidity   </span></span>
<span id="cb283-14"><a href="決定木分析.html#cb283-14" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb283-15"><a href="決定木分析.html#cb283-15" tabindex="-1"></a><span class="co">#&gt; Root node error: 2320/3000 = 0.77335</span></span>
<span id="cb283-16"><a href="決定木分析.html#cb283-16" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb283-17"><a href="決定木分析.html#cb283-17" tabindex="-1"></a><span class="co">#&gt; n= 3000 </span></span>
<span id="cb283-18"><a href="決定木分析.html#cb283-18" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb283-19"><a href="決定木分析.html#cb283-19" tabindex="-1"></a><span class="co">#&gt;         CP nsplit rel error  xerror     xstd</span></span>
<span id="cb283-20"><a href="決定木分析.html#cb283-20" tabindex="-1"></a><span class="co">#&gt; 1 0.155959      0   1.00000 1.00109 0.027711</span></span>
<span id="cb283-21"><a href="決定木分析.html#cb283-21" tabindex="-1"></a><span class="co">#&gt; 2 0.057651      1   0.84404 0.84827 0.026277</span></span>
<span id="cb283-22"><a href="決定木分析.html#cb283-22" tabindex="-1"></a><span class="co">#&gt; 3 0.027428      2   0.78639 0.80140 0.025794</span></span>
<span id="cb283-23"><a href="決定木分析.html#cb283-23" tabindex="-1"></a><span class="co">#&gt; 4 0.018795      3   0.75896 0.77812 0.024591</span></span>
<span id="cb283-24"><a href="決定木分析.html#cb283-24" tabindex="-1"></a><span class="co">#&gt; 5 0.011842      4   0.74017 0.75908 0.024127</span></span>
<span id="cb283-25"><a href="決定木分析.html#cb283-25" tabindex="-1"></a><span class="co">#&gt; 6 0.010000      6   0.71648 0.74854 0.023784</span></span>
<span id="cb283-26"><a href="決定木分析.html#cb283-26" tabindex="-1"></a><span class="fu">plotcp</span>(wine_rp)</span></code></pre></div>
<p><img src="090-DT_files/figure-html/unnamed-chunk-14-1.png" width="75%" /></p>
<div class="sourceCode" id="cb284"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb284-1"><a href="決定木分析.html#cb284-1" tabindex="-1"></a><span class="co"># 手動による剪定例 (complex parameter(cp)の大きさに基づいて)</span></span>
<span id="cb284-2"><a href="決定木分析.html#cb284-2" tabindex="-1"></a>wine_rp1 <span class="ot">&lt;-</span> <span class="fu">prune</span>(wine_rp, <span class="at">cp =</span> <span class="fl">0.03</span>)</span>
<span id="cb284-3"><a href="決定木分析.html#cb284-3" tabindex="-1"></a><span class="fu">plot</span>(wine_rp1, <span class="at">uniform =</span> T, <span class="at">margin =</span> <span class="fl">0.05</span>)</span>
<span id="cb284-4"><a href="決定木分析.html#cb284-4" tabindex="-1"></a><span class="fu">text</span>(wine_rp1, <span class="at">all =</span> T, <span class="at">use.n =</span> T)</span></code></pre></div>
<p><img src="090-DT_files/figure-html/unnamed-chunk-15-1.png" width="75%" /></p>
</div>
</div>
<div id="分類木" class="section level2 hasAnchor" number="8.3">
<h2><span class="header-section-number">8.3</span> 分類木<a href="決定木分析.html#分類木" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="データセット3-自動車評価データ" class="section level3 unnumbered hasAnchor">
<h3>データセット3: 自動車評価データ<a href="決定木分析.html#データセット3-自動車評価データ" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<pre><code>- car.data.txt
   - Class (評価, 4水準), unacc, acc, good, vgood
   - buying (価格帯, 4): vhigh, high, med, low. 
   - maint (維持費, 4): vhigh, high, med, low. 
   - doors (ドア数, 4): 2, 3, 4, 5more. 
   - persons (乗車人数, 3): 2, 4, more. 
   - lug_boot (収納性, 3): small, med, big. 
   - safety (安全性, 3): low, med, high. 
- source: https://archive.ics.uci.edu/ml/datasets/Car+Evaluation
- 注) factorの並び (Levels) はデフォルトではアルファベット順</code></pre>
<div class="sourceCode" id="cb286"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb286-1"><a href="決定木分析.html#cb286-1" tabindex="-1"></a><span class="fu">library</span>(rpart)</span>
<span id="cb286-2"><a href="決定木分析.html#cb286-2" tabindex="-1"></a>cardata0 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;car.data.txt&quot;</span>, <span class="at">skip =</span> <span class="dv">6</span>)</span>
<span id="cb286-3"><a href="決定木分析.html#cb286-3" tabindex="-1"></a><span class="fu">attach</span>(cardata0)</span>
<span id="cb286-4"><a href="決定木分析.html#cb286-4" tabindex="-1"></a><span class="co"># factorの並び(Levels)はデフォルトではアルファベット順 →</span></span>
<span id="cb286-5"><a href="決定木分析.html#cb286-5" tabindex="-1"></a><span class="co"># 好ましくない～好ましいの順に, 並べ替え</span></span>
<span id="cb286-6"><a href="決定木分析.html#cb286-6" tabindex="-1"></a>評価 <span class="ot">&lt;-</span> <span class="fu">factor</span>(Class, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;unacc&quot;</span>, <span class="st">&quot;acc&quot;</span>, <span class="st">&quot;good&quot;</span>, <span class="st">&quot;vgood&quot;</span>))</span>
<span id="cb286-7"><a href="決定木分析.html#cb286-7" tabindex="-1"></a>価格帯 <span class="ot">&lt;-</span> <span class="fu">factor</span>(buying, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;vhigh&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;med&quot;</span>, <span class="st">&quot;low&quot;</span>))</span>
<span id="cb286-8"><a href="決定木分析.html#cb286-8" tabindex="-1"></a>維持費 <span class="ot">&lt;-</span> <span class="fu">factor</span>(maint, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;vhigh&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;med&quot;</span>, <span class="st">&quot;low&quot;</span>))</span>
<span id="cb286-9"><a href="決定木分析.html#cb286-9" tabindex="-1"></a>ドア数 <span class="ot">&lt;-</span> <span class="fu">factor</span>(doors, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;2&quot;</span>, <span class="st">&quot;3&quot;</span>, <span class="st">&quot;4&quot;</span>, <span class="st">&quot;5more&quot;</span>))</span>
<span id="cb286-10"><a href="決定木分析.html#cb286-10" tabindex="-1"></a>乗車人数 <span class="ot">&lt;-</span> <span class="fu">factor</span>(persons, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;2&quot;</span>, <span class="st">&quot;4&quot;</span>, <span class="st">&quot;more&quot;</span>))</span>
<span id="cb286-11"><a href="決定木分析.html#cb286-11" tabindex="-1"></a>収納性 <span class="ot">&lt;-</span> <span class="fu">factor</span>(lug_boot, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;small&quot;</span>, <span class="st">&quot;med&quot;</span>, <span class="st">&quot;big&quot;</span>))</span>
<span id="cb286-12"><a href="決定木分析.html#cb286-12" tabindex="-1"></a>安全性 <span class="ot">&lt;-</span> <span class="fu">factor</span>(safety, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;low&quot;</span>, <span class="st">&quot;med&quot;</span>, <span class="st">&quot;high&quot;</span>))</span>
<span id="cb286-13"><a href="決定木分析.html#cb286-13" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb286-14"><a href="決定木分析.html#cb286-14" tabindex="-1"></a>cardata1 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(評価, 価格帯, 維持費, ドア数, 乗車人数, 収納性,</span>
<span id="cb286-15"><a href="決定木分析.html#cb286-15" tabindex="-1"></a>  安全性)</span>
<span id="cb286-16"><a href="決定木分析.html#cb286-16" tabindex="-1"></a><span class="fu">head</span>(cardata1)</span>
<span id="cb286-17"><a href="決定木分析.html#cb286-17" tabindex="-1"></a><span class="co">#&gt;    評価 価格帯 維持費 ドア数 乗車人数 収納性 安全性</span></span>
<span id="cb286-18"><a href="決定木分析.html#cb286-18" tabindex="-1"></a><span class="co">#&gt; 1 unacc  vhigh  vhigh      2        2  small    low</span></span>
<span id="cb286-19"><a href="決定木分析.html#cb286-19" tabindex="-1"></a><span class="co">#&gt; 2 unacc  vhigh  vhigh      2        2  small    med</span></span>
<span id="cb286-20"><a href="決定木分析.html#cb286-20" tabindex="-1"></a><span class="co">#&gt; 3 unacc  vhigh  vhigh      2        2  small   high</span></span>
<span id="cb286-21"><a href="決定木分析.html#cb286-21" tabindex="-1"></a><span class="co">#&gt; 4 unacc  vhigh  vhigh      2        2    med    low</span></span>
<span id="cb286-22"><a href="決定木分析.html#cb286-22" tabindex="-1"></a><span class="co">#&gt; 5 unacc  vhigh  vhigh      2        2    med    med</span></span>
<span id="cb286-23"><a href="決定木分析.html#cb286-23" tabindex="-1"></a><span class="co">#&gt; 6 unacc  vhigh  vhigh      2        2    med   high</span></span></code></pre></div>
<div class="sourceCode" id="cb287"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb287-1"><a href="決定木分析.html#cb287-1" tabindex="-1"></a><span class="co"># 元データを, 学習用データとテスト用データに分割</span></span>
<span id="cb287-2"><a href="決定木分析.html#cb287-2" tabindex="-1"></a><span class="co"># 学習用データでモデルに学習させる</span></span>
<span id="cb287-3"><a href="決定木分析.html#cb287-3" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">100</span>)</span>
<span id="cb287-4"><a href="決定木分析.html#cb287-4" tabindex="-1"></a>smpl_idx <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(cardata1), <span class="dv">1500</span>)  <span class="co"># 元データ(行番号)から1500件を非復元抽出</span></span>
<span id="cb287-5"><a href="決定木分析.html#cb287-5" tabindex="-1"></a>car_train <span class="ot">&lt;-</span> cardata1[smpl_idx, ]  <span class="co"># 学習用データセット, 1500件</span></span>
<span id="cb287-6"><a href="決定木分析.html#cb287-6" tabindex="-1"></a>car_test <span class="ot">&lt;-</span> cardata1[<span class="sc">-</span>smpl_idx, ]  <span class="co"># テスト用データセット, 残り</span></span></code></pre></div>
<p>学習用データセットで訓練(学習).</p>
<div class="sourceCode" id="cb288"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb288-1"><a href="決定木分析.html#cb288-1" tabindex="-1"></a>cardata <span class="ot">&lt;-</span> car_train</span>
<span id="cb288-2"><a href="決定木分析.html#cb288-2" tabindex="-1"></a><span class="fu">table</span>(cardata[, <span class="fu">c</span>(<span class="st">&quot;評価&quot;</span>, <span class="st">&quot;価格帯&quot;</span>)])</span>
<span id="cb288-3"><a href="決定木分析.html#cb288-3" tabindex="-1"></a><span class="co">#&gt;        価格帯</span></span>
<span id="cb288-4"><a href="決定木分析.html#cb288-4" tabindex="-1"></a><span class="co">#&gt; 評価  vhigh high med low</span></span>
<span id="cb288-5"><a href="決定木分析.html#cb288-5" tabindex="-1"></a><span class="co">#&gt;   unacc   307  281 239 221</span></span>
<span id="cb288-6"><a href="決定木分析.html#cb288-6" tabindex="-1"></a><span class="co">#&gt;   acc      65   92  94  79</span></span>
<span id="cb288-7"><a href="決定木分析.html#cb288-7" tabindex="-1"></a><span class="co">#&gt;   good      0    0  20  40</span></span>
<span id="cb288-8"><a href="決定木分析.html#cb288-8" tabindex="-1"></a><span class="co">#&gt;   vgood     0    0  24  38</span></span>
<span id="cb288-9"><a href="決定木分析.html#cb288-9" tabindex="-1"></a><span class="fu">table</span>(cardata[, <span class="fu">c</span>(<span class="st">&quot;評価&quot;</span>, <span class="st">&quot;維持費&quot;</span>)])</span>
<span id="cb288-10"><a href="決定木分析.html#cb288-10" tabindex="-1"></a><span class="co">#&gt;        維持費</span></span>
<span id="cb288-11"><a href="決定木分析.html#cb288-11" tabindex="-1"></a><span class="co">#&gt; 評価  vhigh high med low</span></span>
<span id="cb288-12"><a href="決定木分析.html#cb288-12" tabindex="-1"></a><span class="co">#&gt;   unacc   310  270 235 233</span></span>
<span id="cb288-13"><a href="決定木分析.html#cb288-13" tabindex="-1"></a><span class="co">#&gt;   acc      60   89 102  79</span></span>
<span id="cb288-14"><a href="決定木分析.html#cb288-14" tabindex="-1"></a><span class="co">#&gt;   good      0    0  22  38</span></span>
<span id="cb288-15"><a href="決定木分析.html#cb288-15" tabindex="-1"></a><span class="co">#&gt;   vgood     0   12  25  25</span></span>
<span id="cb288-16"><a href="決定木分析.html#cb288-16" tabindex="-1"></a><span class="fu">table</span>(cardata[, <span class="fu">c</span>(<span class="st">&quot;評価&quot;</span>, <span class="st">&quot;ドア数&quot;</span>)])</span>
<span id="cb288-17"><a href="決定木分析.html#cb288-17" tabindex="-1"></a><span class="co">#&gt;        ドア数</span></span>
<span id="cb288-18"><a href="決定木分析.html#cb288-18" tabindex="-1"></a><span class="co">#&gt; 評価    2   3   4 5more</span></span>
<span id="cb288-19"><a href="決定木分析.html#cb288-19" tabindex="-1"></a><span class="co">#&gt;   unacc 282 263 255   248</span></span>
<span id="cb288-20"><a href="決定木分析.html#cb288-20" tabindex="-1"></a><span class="co">#&gt;   acc    74  82  86    88</span></span>
<span id="cb288-21"><a href="決定木分析.html#cb288-21" tabindex="-1"></a><span class="co">#&gt;   good   14  15  16    15</span></span>
<span id="cb288-22"><a href="決定木分析.html#cb288-22" tabindex="-1"></a><span class="co">#&gt;   vgood  10  13  19    20</span></span>
<span id="cb288-23"><a href="決定木分析.html#cb288-23" tabindex="-1"></a><span class="fu">table</span>(cardata[, <span class="fu">c</span>(<span class="st">&quot;評価&quot;</span>, <span class="st">&quot;乗車人数&quot;</span>)])</span>
<span id="cb288-24"><a href="決定木分析.html#cb288-24" tabindex="-1"></a><span class="co">#&gt;        乗車人数</span></span>
<span id="cb288-25"><a href="決定木分析.html#cb288-25" tabindex="-1"></a><span class="co">#&gt; 評価    2   4 more</span></span>
<span id="cb288-26"><a href="決定木分析.html#cb288-26" tabindex="-1"></a><span class="co">#&gt;   unacc 494 283  271</span></span>
<span id="cb288-27"><a href="決定木分析.html#cb288-27" tabindex="-1"></a><span class="co">#&gt;   acc     0 169  161</span></span>
<span id="cb288-28"><a href="決定木分析.html#cb288-28" tabindex="-1"></a><span class="co">#&gt;   good    0  31   29</span></span>
<span id="cb288-29"><a href="決定木分析.html#cb288-29" tabindex="-1"></a><span class="co">#&gt;   vgood   0  29   33</span></span>
<span id="cb288-30"><a href="決定木分析.html#cb288-30" tabindex="-1"></a><span class="fu">table</span>(cardata[, <span class="fu">c</span>(<span class="st">&quot;評価&quot;</span>, <span class="st">&quot;収納性&quot;</span>)])  <span class="co"># balanced</span></span>
<span id="cb288-31"><a href="決定木分析.html#cb288-31" tabindex="-1"></a><span class="co">#&gt;        収納性</span></span>
<span id="cb288-32"><a href="決定木分析.html#cb288-32" tabindex="-1"></a><span class="co">#&gt; 評価  small med big</span></span>
<span id="cb288-33"><a href="決定木分析.html#cb288-33" tabindex="-1"></a><span class="co">#&gt;   unacc   393 341 314</span></span>
<span id="cb288-34"><a href="決定木分析.html#cb288-34" tabindex="-1"></a><span class="co">#&gt;   acc      94 112 124</span></span>
<span id="cb288-35"><a href="決定木分析.html#cb288-35" tabindex="-1"></a><span class="co">#&gt;   good     18  24  18</span></span>
<span id="cb288-36"><a href="決定木分析.html#cb288-36" tabindex="-1"></a><span class="co">#&gt;   vgood     0  24  38</span></span></code></pre></div>
<div class="sourceCode" id="cb289"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb289-1"><a href="決定木分析.html#cb289-1" tabindex="-1"></a>res_rp <span class="ot">&lt;-</span> <span class="fu">rpart</span>(評価 <span class="sc">~</span> ., <span class="at">data =</span> cardata)</span>
<span id="cb289-2"><a href="決定木分析.html#cb289-2" tabindex="-1"></a><span class="fu">summary</span>(res_rp)</span>
<span id="cb289-3"><a href="決定木分析.html#cb289-3" tabindex="-1"></a><span class="co">#&gt; Call:</span></span>
<span id="cb289-4"><a href="決定木分析.html#cb289-4" tabindex="-1"></a><span class="co">#&gt; rpart(formula = 評価 ~ ., data = cardata)</span></span>
<span id="cb289-5"><a href="決定木分析.html#cb289-5" tabindex="-1"></a><span class="co">#&gt;   n= 1500 </span></span>
<span id="cb289-6"><a href="決定木分析.html#cb289-6" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb289-7"><a href="決定木分析.html#cb289-7" tabindex="-1"></a><span class="co">#&gt;            CP nsplit rel error    xerror       xstd</span></span>
<span id="cb289-8"><a href="決定木分析.html#cb289-8" tabindex="-1"></a><span class="co">#&gt; 1  0.12389381      0 1.0000000 1.0000000 0.03931568</span></span>
<span id="cb289-9"><a href="決定木分析.html#cb289-9" tabindex="-1"></a><span class="co">#&gt; 2  0.11283186      2 0.7522124 0.9181416 0.03833142</span></span>
<span id="cb289-10"><a href="決定木分析.html#cb289-10" tabindex="-1"></a><span class="co">#&gt; 3  0.04535398      4 0.5265487 0.5265487 0.03130647</span></span>
<span id="cb289-11"><a href="決定木分析.html#cb289-11" tabindex="-1"></a><span class="co">#&gt; 4  0.03982301      6 0.4358407 0.4889381 0.03037018</span></span>
<span id="cb289-12"><a href="決定木分析.html#cb289-12" tabindex="-1"></a><span class="co">#&gt; 5  0.03097345      7 0.3960177 0.4137168 0.02830539</span></span>
<span id="cb289-13"><a href="決定木分析.html#cb289-13" tabindex="-1"></a><span class="co">#&gt; 6  0.02876106      9 0.3340708 0.3805310 0.02730104</span></span>
<span id="cb289-14"><a href="決定木分析.html#cb289-14" tabindex="-1"></a><span class="co">#&gt; 7  0.02101770     10 0.3053097 0.3429204 0.02608212</span></span>
<span id="cb289-15"><a href="決定木分析.html#cb289-15" tabindex="-1"></a><span class="co">#&gt; 8  0.01880531     12 0.2632743 0.3163717 0.02516366</span></span>
<span id="cb289-16"><a href="決定木分析.html#cb289-16" tabindex="-1"></a><span class="co">#&gt; 9  0.01327434     14 0.2256637 0.2389381 0.02214866</span></span>
<span id="cb289-17"><a href="決定木分析.html#cb289-17" tabindex="-1"></a><span class="co">#&gt; 10 0.01000000     16 0.1991150 0.2212389 0.02137371</span></span>
<span id="cb289-18"><a href="決定木分析.html#cb289-18" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb289-19"><a href="決定木分析.html#cb289-19" tabindex="-1"></a><span class="co">#&gt; Variable importance</span></span>
<span id="cb289-20"><a href="決定木分析.html#cb289-20" tabindex="-1"></a><span class="co">#&gt;   安全性 乗車人数   維持費   収納性   価格帯   ドア数 </span></span>
<span id="cb289-21"><a href="決定木分析.html#cb289-21" tabindex="-1"></a><span class="co">#&gt;       30       28       20       10       10        1 </span></span>
<span id="cb289-22"><a href="決定木分析.html#cb289-22" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb289-23"><a href="決定木分析.html#cb289-23" tabindex="-1"></a><span class="co">#&gt; Node number 1: 1500 observations,    complexity param=0.1238938</span></span>
<span id="cb289-24"><a href="決定木分析.html#cb289-24" tabindex="-1"></a><span class="co">#&gt;   predicted class=unacc  expected loss=0.3013333  P(node) =1</span></span>
<span id="cb289-25"><a href="決定木分析.html#cb289-25" tabindex="-1"></a><span class="co">#&gt;     class counts:  1048   330    60    62</span></span>
<span id="cb289-26"><a href="決定木分析.html#cb289-26" tabindex="-1"></a><span class="co">#&gt;    probabilities: 0.699 0.220 0.040 0.041 </span></span>
<span id="cb289-27"><a href="決定木分析.html#cb289-27" tabindex="-1"></a><span class="co">#&gt;   left son=2 (508 obs) right son=3 (992 obs)</span></span>
<span id="cb289-28"><a href="決定木分析.html#cb289-28" tabindex="-1"></a><span class="co">#&gt;   Primary splits:</span></span>
<span id="cb289-29"><a href="決定木分析.html#cb289-29" tabindex="-1"></a><span class="co">#&gt;       安全性   splits as  LRR,  improve=109.468500, (0 missing)</span></span>
<span id="cb289-30"><a href="決定木分析.html#cb289-30" tabindex="-1"></a><span class="co">#&gt;       乗車人数 splits as  LRR,  improve=104.970300, (0 missing)</span></span>
<span id="cb289-31"><a href="決定木分析.html#cb289-31" tabindex="-1"></a><span class="co">#&gt;       価格帯   splits as  LLRR, improve= 17.172040, (0 missing)</span></span>
<span id="cb289-32"><a href="決定木分析.html#cb289-32" tabindex="-1"></a><span class="co">#&gt;       維持費   splits as  LLRR, improve= 14.140400, (0 missing)</span></span>
<span id="cb289-33"><a href="決定木分析.html#cb289-33" tabindex="-1"></a><span class="co">#&gt;       収納性   splits as  LRR,  improve=  7.005849, (0 missing)</span></span>
<span id="cb289-34"><a href="決定木分析.html#cb289-34" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb289-35"><a href="決定木分析.html#cb289-35" tabindex="-1"></a><span class="co">#&gt; Node number 2: 508 observations</span></span>
<span id="cb289-36"><a href="決定木分析.html#cb289-36" tabindex="-1"></a><span class="co">#&gt;   predicted class=unacc  expected loss=0  P(node) =0.3386667</span></span>
<span id="cb289-37"><a href="決定木分析.html#cb289-37" tabindex="-1"></a><span class="co">#&gt;     class counts:   508     0     0     0</span></span>
<span id="cb289-38"><a href="決定木分析.html#cb289-38" tabindex="-1"></a><span class="co">#&gt;    probabilities: 1.000 0.000 0.000 0.000 </span></span>
<span id="cb289-39"><a href="決定木分析.html#cb289-39" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb289-40"><a href="決定木分析.html#cb289-40" tabindex="-1"></a><span class="co">#&gt; Node number 3: 992 observations,    complexity param=0.1238938</span></span>
<span id="cb289-41"><a href="決定木分析.html#cb289-41" tabindex="-1"></a><span class="co">#&gt;   predicted class=unacc  expected loss=0.4556452  P(node) =0.6613333</span></span>
<span id="cb289-42"><a href="決定木分析.html#cb289-42" tabindex="-1"></a><span class="co">#&gt;     class counts:   540   330    60    62</span></span>
<span id="cb289-43"><a href="決定木分析.html#cb289-43" tabindex="-1"></a><span class="co">#&gt;    probabilities: 0.544 0.333 0.060 0.062 </span></span>
<span id="cb289-44"><a href="決定木分析.html#cb289-44" tabindex="-1"></a><span class="co">#&gt;   left son=6 (322 obs) right son=7 (670 obs)</span></span>
<span id="cb289-45"><a href="決定木分析.html#cb289-45" tabindex="-1"></a><span class="co">#&gt;   Primary splits:</span></span>
<span id="cb289-46"><a href="決定木分析.html#cb289-46" tabindex="-1"></a><span class="co">#&gt;       乗車人数 splits as  LRR,  improve=155.34520, (0 missing)</span></span>
<span id="cb289-47"><a href="決定木分析.html#cb289-47" tabindex="-1"></a><span class="co">#&gt;       価格帯   splits as  LLRR, improve= 26.05666, (0 missing)</span></span>
<span id="cb289-48"><a href="決定木分析.html#cb289-48" tabindex="-1"></a><span class="co">#&gt;       維持費   splits as  LLRR, improve= 19.14227, (0 missing)</span></span>
<span id="cb289-49"><a href="決定木分析.html#cb289-49" tabindex="-1"></a><span class="co">#&gt;       安全性   splits as  -LR,  improve= 11.33566, (0 missing)</span></span>
<span id="cb289-50"><a href="決定木分析.html#cb289-50" tabindex="-1"></a><span class="co">#&gt;       収納性   splits as  LRR,  improve= 11.03210, (0 missing)</span></span>
<span id="cb289-51"><a href="決定木分析.html#cb289-51" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb289-52"><a href="決定木分析.html#cb289-52" tabindex="-1"></a><span class="co">#&gt; Node number 6: 322 observations</span></span>
<span id="cb289-53"><a href="決定木分析.html#cb289-53" tabindex="-1"></a><span class="co">#&gt;   predicted class=unacc  expected loss=0  P(node) =0.2146667</span></span>
<span id="cb289-54"><a href="決定木分析.html#cb289-54" tabindex="-1"></a><span class="co">#&gt;     class counts:   322     0     0     0</span></span>
<span id="cb289-55"><a href="決定木分析.html#cb289-55" tabindex="-1"></a><span class="co">#&gt;    probabilities: 1.000 0.000 0.000 0.000 </span></span>
<span id="cb289-56"><a href="決定木分析.html#cb289-56" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb289-57"><a href="決定木分析.html#cb289-57" tabindex="-1"></a><span class="co">#&gt; Node number 7: 670 observations,    complexity param=0.1128319</span></span>
<span id="cb289-58"><a href="決定木分析.html#cb289-58" tabindex="-1"></a><span class="co">#&gt;   predicted class=acc    expected loss=0.5074627  P(node) =0.4466667</span></span>
<span id="cb289-59"><a href="決定木分析.html#cb289-59" tabindex="-1"></a><span class="co">#&gt;     class counts:   218   330    60    62</span></span>
<span id="cb289-60"><a href="決定木分析.html#cb289-60" tabindex="-1"></a><span class="co">#&gt;    probabilities: 0.325 0.493 0.090 0.093 </span></span>
<span id="cb289-61"><a href="決定木分析.html#cb289-61" tabindex="-1"></a><span class="co">#&gt;   left son=14 (333 obs) right son=15 (337 obs)</span></span>
<span id="cb289-62"><a href="決定木分析.html#cb289-62" tabindex="-1"></a><span class="co">#&gt;   Primary splits:</span></span>
<span id="cb289-63"><a href="決定木分析.html#cb289-63" tabindex="-1"></a><span class="co">#&gt;       価格帯 splits as  LLRR, improve=38.596470, (0 missing)</span></span>
<span id="cb289-64"><a href="決定木分析.html#cb289-64" tabindex="-1"></a><span class="co">#&gt;       維持費 splits as  LLRR, improve=29.807250, (0 missing)</span></span>
<span id="cb289-65"><a href="決定木分析.html#cb289-65" tabindex="-1"></a><span class="co">#&gt;       収納性 splits as  LRR,  improve=17.341050, (0 missing)</span></span>
<span id="cb289-66"><a href="決定木分析.html#cb289-66" tabindex="-1"></a><span class="co">#&gt;       安全性 splits as  -LR,  improve=15.372940, (0 missing)</span></span>
<span id="cb289-67"><a href="決定木分析.html#cb289-67" tabindex="-1"></a><span class="co">#&gt;       ドア数 splits as  LRRR, improve= 4.288712, (0 missing)</span></span>
<span id="cb289-68"><a href="決定木分析.html#cb289-68" tabindex="-1"></a><span class="co">#&gt;   Surrogate splits:</span></span>
<span id="cb289-69"><a href="決定木分析.html#cb289-69" tabindex="-1"></a><span class="co">#&gt;       ドア数   splits as  RLRR, agree=0.516, adj=0.027, (0 split)</span></span>
<span id="cb289-70"><a href="決定木分析.html#cb289-70" tabindex="-1"></a><span class="co">#&gt;       安全性   splits as  -LR,  agree=0.510, adj=0.015, (0 split)</span></span>
<span id="cb289-71"><a href="決定木分析.html#cb289-71" tabindex="-1"></a><span class="co">#&gt;       乗車人数 splits as  -LR,  agree=0.509, adj=0.012, (0 split)</span></span>
<span id="cb289-72"><a href="決定木分析.html#cb289-72" tabindex="-1"></a><span class="co">#&gt;       維持費   splits as  RRRL, agree=0.507, adj=0.009, (0 split)</span></span>
<span id="cb289-73"><a href="決定木分析.html#cb289-73" tabindex="-1"></a><span class="co">#&gt;       収納性   splits as  LRR,  agree=0.504, adj=0.003, (0 split)</span></span>
<span id="cb289-74"><a href="決定木分析.html#cb289-74" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb289-75"><a href="決定木分析.html#cb289-75" tabindex="-1"></a><span class="co">#&gt; Node number 14: 333 observations,    complexity param=0.1128319</span></span>
<span id="cb289-76"><a href="決定木分析.html#cb289-76" tabindex="-1"></a><span class="co">#&gt;   predicted class=unacc  expected loss=0.4714715  P(node) =0.222</span></span>
<span id="cb289-77"><a href="決定木分析.html#cb289-77" tabindex="-1"></a><span class="co">#&gt;     class counts:   176   157     0     0</span></span>
<span id="cb289-78"><a href="決定木分析.html#cb289-78" tabindex="-1"></a><span class="co">#&gt;    probabilities: 0.529 0.471 0.000 0.000 </span></span>
<span id="cb289-79"><a href="決定木分析.html#cb289-79" tabindex="-1"></a><span class="co">#&gt;   left son=28 (162 obs) right son=29 (171 obs)</span></span>
<span id="cb289-80"><a href="決定木分析.html#cb289-80" tabindex="-1"></a><span class="co">#&gt;   Primary splits:</span></span>
<span id="cb289-81"><a href="決定木分析.html#cb289-81" tabindex="-1"></a><span class="co">#&gt;       維持費 splits as  LLRR, improve=51.712340, (0 missing)</span></span>
<span id="cb289-82"><a href="決定木分析.html#cb289-82" tabindex="-1"></a><span class="co">#&gt;       収納性 splits as  LRR,  improve=14.322380, (0 missing)</span></span>
<span id="cb289-83"><a href="決定木分析.html#cb289-83" tabindex="-1"></a><span class="co">#&gt;       安全性 splits as  -LR,  improve=12.358880, (0 missing)</span></span>
<span id="cb289-84"><a href="決定木分析.html#cb289-84" tabindex="-1"></a><span class="co">#&gt;       価格帯 splits as  LR--, improve= 5.866990, (0 missing)</span></span>
<span id="cb289-85"><a href="決定木分析.html#cb289-85" tabindex="-1"></a><span class="co">#&gt;       ドア数 splits as  LRRR, improve= 2.000571, (0 missing)</span></span>
<span id="cb289-86"><a href="決定木分析.html#cb289-86" tabindex="-1"></a><span class="co">#&gt;   Surrogate splits:</span></span>
<span id="cb289-87"><a href="決定木分析.html#cb289-87" tabindex="-1"></a><span class="co">#&gt;       ドア数 splits as  RRLR, agree=0.520, adj=0.012, (0 split)</span></span>
<span id="cb289-88"><a href="決定木分析.html#cb289-88" tabindex="-1"></a><span class="co">#&gt;       収納性 splits as  LRR,  agree=0.517, adj=0.006, (0 split)</span></span>
<span id="cb289-89"><a href="決定木分析.html#cb289-89" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb289-90"><a href="決定木分析.html#cb289-90" tabindex="-1"></a><span class="co">#&gt; Node number 15: 337 observations,    complexity param=0.04535398</span></span>
<span id="cb289-91"><a href="決定木分析.html#cb289-91" tabindex="-1"></a><span class="co">#&gt;   predicted class=acc    expected loss=0.4866469  P(node) =0.2246667</span></span>
<span id="cb289-92"><a href="決定木分析.html#cb289-92" tabindex="-1"></a><span class="co">#&gt;     class counts:    42   173    60    62</span></span>
<span id="cb289-93"><a href="決定木分析.html#cb289-93" tabindex="-1"></a><span class="co">#&gt;    probabilities: 0.125 0.513 0.178 0.184 </span></span>
<span id="cb289-94"><a href="決定木分析.html#cb289-94" tabindex="-1"></a><span class="co">#&gt;   left son=30 (166 obs) right son=31 (171 obs)</span></span>
<span id="cb289-95"><a href="決定木分析.html#cb289-95" tabindex="-1"></a><span class="co">#&gt;   Primary splits:</span></span>
<span id="cb289-96"><a href="決定木分析.html#cb289-96" tabindex="-1"></a><span class="co">#&gt;       維持費 splits as  LLRR, improve=30.432380, (0 missing)</span></span>
<span id="cb289-97"><a href="決定木分析.html#cb289-97" tabindex="-1"></a><span class="co">#&gt;       安全性 splits as  -LR,  improve=15.159790, (0 missing)</span></span>
<span id="cb289-98"><a href="決定木分析.html#cb289-98" tabindex="-1"></a><span class="co">#&gt;       収納性 splits as  LRR,  improve=10.848300, (0 missing)</span></span>
<span id="cb289-99"><a href="決定木分析.html#cb289-99" tabindex="-1"></a><span class="co">#&gt;       価格帯 splits as  --LR, improve= 2.920132, (0 missing)</span></span>
<span id="cb289-100"><a href="決定木分析.html#cb289-100" tabindex="-1"></a><span class="co">#&gt;       ドア数 splits as  LRRR, improve= 2.729825, (0 missing)</span></span>
<span id="cb289-101"><a href="決定木分析.html#cb289-101" tabindex="-1"></a><span class="co">#&gt;   Surrogate splits:</span></span>
<span id="cb289-102"><a href="決定木分析.html#cb289-102" tabindex="-1"></a><span class="co">#&gt;       ドア数 splits as  RRRL, agree=0.513, adj=0.012, (0 split)</span></span>
<span id="cb289-103"><a href="決定木分析.html#cb289-103" tabindex="-1"></a><span class="co">#&gt;       収納性 splits as  LRR,  agree=0.513, adj=0.012, (0 split)</span></span>
<span id="cb289-104"><a href="決定木分析.html#cb289-104" tabindex="-1"></a><span class="co">#&gt;       安全性 splits as  -LR,  agree=0.513, adj=0.012, (0 split)</span></span>
<span id="cb289-105"><a href="決定木分析.html#cb289-105" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb289-106"><a href="決定木分析.html#cb289-106" tabindex="-1"></a><span class="co">#&gt; Node number 28: 162 observations,    complexity param=0.0210177</span></span>
<span id="cb289-107"><a href="決定木分析.html#cb289-107" tabindex="-1"></a><span class="co">#&gt;   predicted class=unacc  expected loss=0.1851852  P(node) =0.108</span></span>
<span id="cb289-108"><a href="決定木分析.html#cb289-108" tabindex="-1"></a><span class="co">#&gt;     class counts:   132    30     0     0</span></span>
<span id="cb289-109"><a href="決定木分析.html#cb289-109" tabindex="-1"></a><span class="co">#&gt;    probabilities: 0.815 0.185 0.000 0.000 </span></span>
<span id="cb289-110"><a href="決定木分析.html#cb289-110" tabindex="-1"></a><span class="co">#&gt;   left son=56 (82 obs) right son=57 (80 obs)</span></span>
<span id="cb289-111"><a href="決定木分析.html#cb289-111" tabindex="-1"></a><span class="co">#&gt;   Primary splits:</span></span>
<span id="cb289-112"><a href="決定木分析.html#cb289-112" tabindex="-1"></a><span class="co">#&gt;       価格帯 splits as  LR--, improve=11.3888900, (0 missing)</span></span>
<span id="cb289-113"><a href="決定木分析.html#cb289-113" tabindex="-1"></a><span class="co">#&gt;       維持費 splits as  LR--, improve=10.8401100, (0 missing)</span></span>
<span id="cb289-114"><a href="決定木分析.html#cb289-114" tabindex="-1"></a><span class="co">#&gt;       収納性 splits as  LLR,  improve= 1.9067460, (0 missing)</span></span>
<span id="cb289-115"><a href="決定木分析.html#cb289-115" tabindex="-1"></a><span class="co">#&gt;       安全性 splits as  -LR,  improve= 0.9437920, (0 missing)</span></span>
<span id="cb289-116"><a href="決定木分析.html#cb289-116" tabindex="-1"></a><span class="co">#&gt;       ドア数 splits as  LLRR, improve= 0.2358401, (0 missing)</span></span>
<span id="cb289-117"><a href="決定木分析.html#cb289-117" tabindex="-1"></a><span class="co">#&gt;   Surrogate splits:</span></span>
<span id="cb289-118"><a href="決定木分析.html#cb289-118" tabindex="-1"></a><span class="co">#&gt;       収納性 splits as  LLR,  agree=0.531, adj=0.050, (0 split)</span></span>
<span id="cb289-119"><a href="決定木分析.html#cb289-119" tabindex="-1"></a><span class="co">#&gt;       ドア数 splits as  LRLR, agree=0.519, adj=0.025, (0 split)</span></span>
<span id="cb289-120"><a href="決定木分析.html#cb289-120" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb289-121"><a href="決定木分析.html#cb289-121" tabindex="-1"></a><span class="co">#&gt; Node number 29: 171 observations,    complexity param=0.03097345</span></span>
<span id="cb289-122"><a href="決定木分析.html#cb289-122" tabindex="-1"></a><span class="co">#&gt;   predicted class=acc    expected loss=0.2573099  P(node) =0.114</span></span>
<span id="cb289-123"><a href="決定木分析.html#cb289-123" tabindex="-1"></a><span class="co">#&gt;     class counts:    44   127     0     0</span></span>
<span id="cb289-124"><a href="決定木分析.html#cb289-124" tabindex="-1"></a><span class="co">#&gt;    probabilities: 0.257 0.743 0.000 0.000 </span></span>
<span id="cb289-125"><a href="決定木分析.html#cb289-125" tabindex="-1"></a><span class="co">#&gt;   left son=58 (57 obs) right son=59 (114 obs)</span></span>
<span id="cb289-126"><a href="決定木分析.html#cb289-126" tabindex="-1"></a><span class="co">#&gt;   Primary splits:</span></span>
<span id="cb289-127"><a href="決定木分析.html#cb289-127" tabindex="-1"></a><span class="co">#&gt;       収納性   splits as  LRR,  improve=15.81287000, (0 missing)</span></span>
<span id="cb289-128"><a href="決定木分析.html#cb289-128" tabindex="-1"></a><span class="co">#&gt;       安全性   splits as  -LR,  improve=14.94250000, (0 missing)</span></span>
<span id="cb289-129"><a href="決定木分析.html#cb289-129" tabindex="-1"></a><span class="co">#&gt;       ドア数   splits as  LRRR, improve= 3.05237700, (0 missing)</span></span>
<span id="cb289-130"><a href="決定木分析.html#cb289-130" tabindex="-1"></a><span class="co">#&gt;       乗車人数 splits as  -RL,  improve= 0.05959792, (0 missing)</span></span>
<span id="cb289-131"><a href="決定木分析.html#cb289-131" tabindex="-1"></a><span class="co">#&gt;       価格帯   splits as  LR--, improve= 0.05664293, (0 missing)</span></span>
<span id="cb289-132"><a href="決定木分析.html#cb289-132" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb289-133"><a href="決定木分析.html#cb289-133" tabindex="-1"></a><span class="co">#&gt; Node number 30: 166 observations,    complexity param=0.01880531</span></span>
<span id="cb289-134"><a href="決定木分析.html#cb289-134" tabindex="-1"></a><span class="co">#&gt;   predicted class=acc    expected loss=0.2831325  P(node) =0.1106667</span></span>
<span id="cb289-135"><a href="決定木分析.html#cb289-135" tabindex="-1"></a><span class="co">#&gt;     class counts:    35   119     0    12</span></span>
<span id="cb289-136"><a href="決定木分析.html#cb289-136" tabindex="-1"></a><span class="co">#&gt;    probabilities: 0.211 0.717 0.000 0.072 </span></span>
<span id="cb289-137"><a href="決定木分析.html#cb289-137" tabindex="-1"></a><span class="co">#&gt;   left son=60 (58 obs) right son=61 (108 obs)</span></span>
<span id="cb289-138"><a href="決定木分析.html#cb289-138" tabindex="-1"></a><span class="co">#&gt;   Primary splits:</span></span>
<span id="cb289-139"><a href="決定木分析.html#cb289-139" tabindex="-1"></a><span class="co">#&gt;       収納性 splits as  LRR,  improve=7.922795, (0 missing)</span></span>
<span id="cb289-140"><a href="決定木分析.html#cb289-140" tabindex="-1"></a><span class="co">#&gt;       安全性 splits as  -LR,  improve=7.674699, (0 missing)</span></span>
<span id="cb289-141"><a href="決定木分析.html#cb289-141" tabindex="-1"></a><span class="co">#&gt;       ドア数 splits as  LRRR, improve=2.069439, (0 missing)</span></span>
<span id="cb289-142"><a href="決定木分析.html#cb289-142" tabindex="-1"></a><span class="co">#&gt;       維持費 splits as  LR--, improve=1.602410, (0 missing)</span></span>
<span id="cb289-143"><a href="決定木分析.html#cb289-143" tabindex="-1"></a><span class="co">#&gt;       価格帯 splits as  --LR, improve=1.284737, (0 missing)</span></span>
<span id="cb289-144"><a href="決定木分析.html#cb289-144" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb289-145"><a href="決定木分析.html#cb289-145" tabindex="-1"></a><span class="co">#&gt; Node number 31: 171 observations,    complexity param=0.04535398</span></span>
<span id="cb289-146"><a href="決定木分析.html#cb289-146" tabindex="-1"></a><span class="co">#&gt;   predicted class=good   expected loss=0.6491228  P(node) =0.114</span></span>
<span id="cb289-147"><a href="決定木分析.html#cb289-147" tabindex="-1"></a><span class="co">#&gt;     class counts:     7    54    60    50</span></span>
<span id="cb289-148"><a href="決定木分析.html#cb289-148" tabindex="-1"></a><span class="co">#&gt;    probabilities: 0.041 0.316 0.351 0.292 </span></span>
<span id="cb289-149"><a href="決定木分析.html#cb289-149" tabindex="-1"></a><span class="co">#&gt;   left son=62 (81 obs) right son=63 (90 obs)</span></span>
<span id="cb289-150"><a href="決定木分析.html#cb289-150" tabindex="-1"></a><span class="co">#&gt;   Primary splits:</span></span>
<span id="cb289-151"><a href="決定木分析.html#cb289-151" tabindex="-1"></a><span class="co">#&gt;       安全性 splits as  -LR,  improve=22.499420, (0 missing)</span></span>
<span id="cb289-152"><a href="決定木分析.html#cb289-152" tabindex="-1"></a><span class="co">#&gt;       収納性 splits as  LRR,  improve=12.487990, (0 missing)</span></span>
<span id="cb289-153"><a href="決定木分析.html#cb289-153" tabindex="-1"></a><span class="co">#&gt;       維持費 splits as  --LR, improve= 4.316887, (0 missing)</span></span>
<span id="cb289-154"><a href="決定木分析.html#cb289-154" tabindex="-1"></a><span class="co">#&gt;       価格帯 splits as  --LR, improve= 3.767329, (0 missing)</span></span>
<span id="cb289-155"><a href="決定木分析.html#cb289-155" tabindex="-1"></a><span class="co">#&gt;       ドア数 splits as  LRRR, improve= 1.797828, (0 missing)</span></span>
<span id="cb289-156"><a href="決定木分析.html#cb289-156" tabindex="-1"></a><span class="co">#&gt;   Surrogate splits:</span></span>
<span id="cb289-157"><a href="決定木分析.html#cb289-157" tabindex="-1"></a><span class="co">#&gt;       ドア数 splits as  RRLR, agree=0.538, adj=0.025, (0 split)</span></span>
<span id="cb289-158"><a href="決定木分析.html#cb289-158" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb289-159"><a href="決定木分析.html#cb289-159" tabindex="-1"></a><span class="co">#&gt; Node number 56: 82 observations</span></span>
<span id="cb289-160"><a href="決定木分析.html#cb289-160" tabindex="-1"></a><span class="co">#&gt;   predicted class=unacc  expected loss=0  P(node) =0.05466667</span></span>
<span id="cb289-161"><a href="決定木分析.html#cb289-161" tabindex="-1"></a><span class="co">#&gt;     class counts:    82     0     0     0</span></span>
<span id="cb289-162"><a href="決定木分析.html#cb289-162" tabindex="-1"></a><span class="co">#&gt;    probabilities: 1.000 0.000 0.000 0.000 </span></span>
<span id="cb289-163"><a href="決定木分析.html#cb289-163" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb289-164"><a href="決定木分析.html#cb289-164" tabindex="-1"></a><span class="co">#&gt; Node number 57: 80 observations,    complexity param=0.0210177</span></span>
<span id="cb289-165"><a href="決定木分析.html#cb289-165" tabindex="-1"></a><span class="co">#&gt;   predicted class=unacc  expected loss=0.375  P(node) =0.05333333</span></span>
<span id="cb289-166"><a href="決定木分析.html#cb289-166" tabindex="-1"></a><span class="co">#&gt;     class counts:    50    30     0     0</span></span>
<span id="cb289-167"><a href="決定木分析.html#cb289-167" tabindex="-1"></a><span class="co">#&gt;    probabilities: 0.625 0.375 0.000 0.000 </span></span>
<span id="cb289-168"><a href="決定木分析.html#cb289-168" tabindex="-1"></a><span class="co">#&gt;   left son=114 (39 obs) right son=115 (41 obs)</span></span>
<span id="cb289-169"><a href="決定木分析.html#cb289-169" tabindex="-1"></a><span class="co">#&gt;   Primary splits:</span></span>
<span id="cb289-170"><a href="決定木分析.html#cb289-170" tabindex="-1"></a><span class="co">#&gt;       維持費   splits as  LR--, improve=21.40244000, (0 missing)</span></span>
<span id="cb289-171"><a href="決定木分析.html#cb289-171" tabindex="-1"></a><span class="co">#&gt;       収納性   splits as  LLR,  improve= 2.65723300, (0 missing)</span></span>
<span id="cb289-172"><a href="決定木分析.html#cb289-172" tabindex="-1"></a><span class="co">#&gt;       安全性   splits as  -LR,  improve= 1.91526000, (0 missing)</span></span>
<span id="cb289-173"><a href="決定木分析.html#cb289-173" tabindex="-1"></a><span class="co">#&gt;       ドア数   splits as  LLRR, improve= 0.56441530, (0 missing)</span></span>
<span id="cb289-174"><a href="決定木分析.html#cb289-174" tabindex="-1"></a><span class="co">#&gt;       乗車人数 splits as  -LR,  improve= 0.05639098, (0 missing)</span></span>
<span id="cb289-175"><a href="決定木分析.html#cb289-175" tabindex="-1"></a><span class="co">#&gt;   Surrogate splits:</span></span>
<span id="cb289-176"><a href="決定木分析.html#cb289-176" tabindex="-1"></a><span class="co">#&gt;       収納性 splits as  RLR,  agree=0.562, adj=0.103, (0 split)</span></span>
<span id="cb289-177"><a href="決定木分析.html#cb289-177" tabindex="-1"></a><span class="co">#&gt;       ドア数 splits as  RLRR, agree=0.525, adj=0.026, (0 split)</span></span>
<span id="cb289-178"><a href="決定木分析.html#cb289-178" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb289-179"><a href="決定木分析.html#cb289-179" tabindex="-1"></a><span class="co">#&gt; Node number 58: 57 observations,    complexity param=0.03097345</span></span>
<span id="cb289-180"><a href="決定木分析.html#cb289-180" tabindex="-1"></a><span class="co">#&gt;   predicted class=unacc  expected loss=0.4385965  P(node) =0.038</span></span>
<span id="cb289-181"><a href="決定木分析.html#cb289-181" tabindex="-1"></a><span class="co">#&gt;     class counts:    32    25     0     0</span></span>
<span id="cb289-182"><a href="決定木分析.html#cb289-182" tabindex="-1"></a><span class="co">#&gt;    probabilities: 0.561 0.439 0.000 0.000 </span></span>
<span id="cb289-183"><a href="決定木分析.html#cb289-183" tabindex="-1"></a><span class="co">#&gt;   left son=116 (28 obs) right son=117 (29 obs)</span></span>
<span id="cb289-184"><a href="決定木分析.html#cb289-184" tabindex="-1"></a><span class="co">#&gt;   Primary splits:</span></span>
<span id="cb289-185"><a href="決定木分析.html#cb289-185" tabindex="-1"></a><span class="co">#&gt;       安全性   splits as  -LR,  improve=21.17362000, (0 missing)</span></span>
<span id="cb289-186"><a href="決定木分析.html#cb289-186" tabindex="-1"></a><span class="co">#&gt;       ドア数   splits as  LRRR, improve= 1.20350900, (0 missing)</span></span>
<span id="cb289-187"><a href="決定木分析.html#cb289-187" tabindex="-1"></a><span class="co">#&gt;       乗車人数 splits as  -RL,  improve= 1.03815600, (0 missing)</span></span>
<span id="cb289-188"><a href="決定木分析.html#cb289-188" tabindex="-1"></a><span class="co">#&gt;       維持費   splits as  --RL, improve= 0.09980507, (0 missing)</span></span>
<span id="cb289-189"><a href="決定木分析.html#cb289-189" tabindex="-1"></a><span class="co">#&gt;       価格帯   splits as  LR--, improve= 0.05032432, (0 missing)</span></span>
<span id="cb289-190"><a href="決定木分析.html#cb289-190" tabindex="-1"></a><span class="co">#&gt;   Surrogate splits:</span></span>
<span id="cb289-191"><a href="決定木分析.html#cb289-191" tabindex="-1"></a><span class="co">#&gt;       価格帯   splits as  LR--, agree=0.526, adj=0.036, (0 split)</span></span>
<span id="cb289-192"><a href="決定木分析.html#cb289-192" tabindex="-1"></a><span class="co">#&gt;       維持費   splits as  --RL, agree=0.526, adj=0.036, (0 split)</span></span>
<span id="cb289-193"><a href="決定木分析.html#cb289-193" tabindex="-1"></a><span class="co">#&gt;       ドア数   splits as  RRLR, agree=0.526, adj=0.036, (0 split)</span></span>
<span id="cb289-194"><a href="決定木分析.html#cb289-194" tabindex="-1"></a><span class="co">#&gt;       乗車人数 splits as  -RL,  agree=0.526, adj=0.036, (0 split)</span></span>
<span id="cb289-195"><a href="決定木分析.html#cb289-195" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb289-196"><a href="決定木分析.html#cb289-196" tabindex="-1"></a><span class="co">#&gt; Node number 59: 114 observations</span></span>
<span id="cb289-197"><a href="決定木分析.html#cb289-197" tabindex="-1"></a><span class="co">#&gt;   predicted class=acc    expected loss=0.1052632  P(node) =0.076</span></span>
<span id="cb289-198"><a href="決定木分析.html#cb289-198" tabindex="-1"></a><span class="co">#&gt;     class counts:    12   102     0     0</span></span>
<span id="cb289-199"><a href="決定木分析.html#cb289-199" tabindex="-1"></a><span class="co">#&gt;    probabilities: 0.105 0.895 0.000 0.000 </span></span>
<span id="cb289-200"><a href="決定木分析.html#cb289-200" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb289-201"><a href="決定木分析.html#cb289-201" tabindex="-1"></a><span class="co">#&gt; Node number 60: 58 observations,    complexity param=0.01880531</span></span>
<span id="cb289-202"><a href="決定木分析.html#cb289-202" tabindex="-1"></a><span class="co">#&gt;   predicted class=acc    expected loss=0.4482759  P(node) =0.03866667</span></span>
<span id="cb289-203"><a href="決定木分析.html#cb289-203" tabindex="-1"></a><span class="co">#&gt;     class counts:    26    32     0     0</span></span>
<span id="cb289-204"><a href="決定木分析.html#cb289-204" tabindex="-1"></a><span class="co">#&gt;    probabilities: 0.448 0.552 0.000 0.000 </span></span>
<span id="cb289-205"><a href="決定木分析.html#cb289-205" tabindex="-1"></a><span class="co">#&gt;   left son=120 (29 obs) right son=121 (29 obs)</span></span>
<span id="cb289-206"><a href="決定木分析.html#cb289-206" tabindex="-1"></a><span class="co">#&gt;   Primary splits:</span></span>
<span id="cb289-207"><a href="決定木分析.html#cb289-207" tabindex="-1"></a><span class="co">#&gt;       安全性   splits as  -LR,  improve=13.7931000, (0 missing)</span></span>
<span id="cb289-208"><a href="決定木分析.html#cb289-208" tabindex="-1"></a><span class="co">#&gt;       維持費   splits as  LR--, improve= 2.2068970, (0 missing)</span></span>
<span id="cb289-209"><a href="決定木分析.html#cb289-209" tabindex="-1"></a><span class="co">#&gt;       ドア数   splits as  LRRR, improve= 1.9956380, (0 missing)</span></span>
<span id="cb289-210"><a href="決定木分析.html#cb289-210" tabindex="-1"></a><span class="co">#&gt;       価格帯   splits as  --LR, improve= 0.8277504, (0 missing)</span></span>
<span id="cb289-211"><a href="決定木分析.html#cb289-211" tabindex="-1"></a><span class="co">#&gt;       乗車人数 splits as  -RL,  improve= 0.3325123, (0 missing)</span></span>
<span id="cb289-212"><a href="決定木分析.html#cb289-212" tabindex="-1"></a><span class="co">#&gt;   Surrogate splits:</span></span>
<span id="cb289-213"><a href="決定木分析.html#cb289-213" tabindex="-1"></a><span class="co">#&gt;       維持費 splits as  LR--, agree=0.552, adj=0.103, (0 split)</span></span>
<span id="cb289-214"><a href="決定木分析.html#cb289-214" tabindex="-1"></a><span class="co">#&gt;       ドア数 splits as  LLRR, agree=0.534, adj=0.069, (0 split)</span></span>
<span id="cb289-215"><a href="決定木分析.html#cb289-215" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb289-216"><a href="決定木分析.html#cb289-216" tabindex="-1"></a><span class="co">#&gt; Node number 61: 108 observations</span></span>
<span id="cb289-217"><a href="決定木分析.html#cb289-217" tabindex="-1"></a><span class="co">#&gt;   predicted class=acc    expected loss=0.1944444  P(node) =0.072</span></span>
<span id="cb289-218"><a href="決定木分析.html#cb289-218" tabindex="-1"></a><span class="co">#&gt;     class counts:     9    87     0    12</span></span>
<span id="cb289-219"><a href="決定木分析.html#cb289-219" tabindex="-1"></a><span class="co">#&gt;    probabilities: 0.083 0.806 0.000 0.111 </span></span>
<span id="cb289-220"><a href="決定木分析.html#cb289-220" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb289-221"><a href="決定木分析.html#cb289-221" tabindex="-1"></a><span class="co">#&gt; Node number 62: 81 observations,    complexity param=0.02876106</span></span>
<span id="cb289-222"><a href="決定木分析.html#cb289-222" tabindex="-1"></a><span class="co">#&gt;   predicted class=acc    expected loss=0.4444444  P(node) =0.054</span></span>
<span id="cb289-223"><a href="決定木分析.html#cb289-223" tabindex="-1"></a><span class="co">#&gt;     class counts:     3    45    33     0</span></span>
<span id="cb289-224"><a href="決定木分析.html#cb289-224" tabindex="-1"></a><span class="co">#&gt;    probabilities: 0.037 0.556 0.407 0.000 </span></span>
<span id="cb289-225"><a href="決定木分析.html#cb289-225" tabindex="-1"></a><span class="co">#&gt;   left son=124 (28 obs) right son=125 (53 obs)</span></span>
<span id="cb289-226"><a href="決定木分析.html#cb289-226" tabindex="-1"></a><span class="co">#&gt;   Primary splits:</span></span>
<span id="cb289-227"><a href="決定木分析.html#cb289-227" tabindex="-1"></a><span class="co">#&gt;       収納性   splits as  LRR,  improve=12.1816400, (0 missing)</span></span>
<span id="cb289-228"><a href="決定木分析.html#cb289-228" tabindex="-1"></a><span class="co">#&gt;       価格帯   splits as  --LR, improve= 2.6916900, (0 missing)</span></span>
<span id="cb289-229"><a href="決定木分析.html#cb289-229" tabindex="-1"></a><span class="co">#&gt;       維持費   splits as  --LR, improve= 2.2466560, (0 missing)</span></span>
<span id="cb289-230"><a href="決定木分析.html#cb289-230" tabindex="-1"></a><span class="co">#&gt;       ドア数   splits as  LLRR, improve= 1.5350200, (0 missing)</span></span>
<span id="cb289-231"><a href="決定木分析.html#cb289-231" tabindex="-1"></a><span class="co">#&gt;       乗車人数 splits as  -RL,  improve= 0.5724932, (0 missing)</span></span>
<span id="cb289-232"><a href="決定木分析.html#cb289-232" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb289-233"><a href="決定木分析.html#cb289-233" tabindex="-1"></a><span class="co">#&gt; Node number 63: 90 observations,    complexity param=0.03982301</span></span>
<span id="cb289-234"><a href="決定木分析.html#cb289-234" tabindex="-1"></a><span class="co">#&gt;   predicted class=vgood  expected loss=0.4444444  P(node) =0.06</span></span>
<span id="cb289-235"><a href="決定木分析.html#cb289-235" tabindex="-1"></a><span class="co">#&gt;     class counts:     4     9    27    50</span></span>
<span id="cb289-236"><a href="決定木分析.html#cb289-236" tabindex="-1"></a><span class="co">#&gt;    probabilities: 0.044 0.100 0.300 0.556 </span></span>
<span id="cb289-237"><a href="決定木分析.html#cb289-237" tabindex="-1"></a><span class="co">#&gt;   left son=126 (28 obs) right son=127 (62 obs)</span></span>
<span id="cb289-238"><a href="決定木分析.html#cb289-238" tabindex="-1"></a><span class="co">#&gt;   Primary splits:</span></span>
<span id="cb289-239"><a href="決定木分析.html#cb289-239" tabindex="-1"></a><span class="co">#&gt;       収納性   splits as  LRR,  improve=18.2472100, (0 missing)</span></span>
<span id="cb289-240"><a href="決定木分析.html#cb289-240" tabindex="-1"></a><span class="co">#&gt;       ドア数   splits as  LLRR, improve= 3.1671560, (0 missing)</span></span>
<span id="cb289-241"><a href="決定木分析.html#cb289-241" tabindex="-1"></a><span class="co">#&gt;       維持費   splits as  --LR, improve= 1.8000000, (0 missing)</span></span>
<span id="cb289-242"><a href="決定木分析.html#cb289-242" tabindex="-1"></a><span class="co">#&gt;       価格帯   splits as  --LR, improve= 1.4888890, (0 missing)</span></span>
<span id="cb289-243"><a href="決定木分析.html#cb289-243" tabindex="-1"></a><span class="co">#&gt;       乗車人数 splits as  -RL,  improve= 0.6274484, (0 missing)</span></span>
<span id="cb289-244"><a href="決定木分析.html#cb289-244" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb289-245"><a href="決定木分析.html#cb289-245" tabindex="-1"></a><span class="co">#&gt; Node number 114: 39 observations</span></span>
<span id="cb289-246"><a href="決定木分析.html#cb289-246" tabindex="-1"></a><span class="co">#&gt;   predicted class=unacc  expected loss=0  P(node) =0.026</span></span>
<span id="cb289-247"><a href="決定木分析.html#cb289-247" tabindex="-1"></a><span class="co">#&gt;     class counts:    39     0     0     0</span></span>
<span id="cb289-248"><a href="決定木分析.html#cb289-248" tabindex="-1"></a><span class="co">#&gt;    probabilities: 1.000 0.000 0.000 0.000 </span></span>
<span id="cb289-249"><a href="決定木分析.html#cb289-249" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb289-250"><a href="決定木分析.html#cb289-250" tabindex="-1"></a><span class="co">#&gt; Node number 115: 41 observations</span></span>
<span id="cb289-251"><a href="決定木分析.html#cb289-251" tabindex="-1"></a><span class="co">#&gt;   predicted class=acc    expected loss=0.2682927  P(node) =0.02733333</span></span>
<span id="cb289-252"><a href="決定木分析.html#cb289-252" tabindex="-1"></a><span class="co">#&gt;     class counts:    11    30     0     0</span></span>
<span id="cb289-253"><a href="決定木分析.html#cb289-253" tabindex="-1"></a><span class="co">#&gt;    probabilities: 0.268 0.732 0.000 0.000 </span></span>
<span id="cb289-254"><a href="決定木分析.html#cb289-254" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb289-255"><a href="決定木分析.html#cb289-255" tabindex="-1"></a><span class="co">#&gt; Node number 116: 28 observations</span></span>
<span id="cb289-256"><a href="決定木分析.html#cb289-256" tabindex="-1"></a><span class="co">#&gt;   predicted class=unacc  expected loss=0  P(node) =0.01866667</span></span>
<span id="cb289-257"><a href="決定木分析.html#cb289-257" tabindex="-1"></a><span class="co">#&gt;     class counts:    28     0     0     0</span></span>
<span id="cb289-258"><a href="決定木分析.html#cb289-258" tabindex="-1"></a><span class="co">#&gt;    probabilities: 1.000 0.000 0.000 0.000 </span></span>
<span id="cb289-259"><a href="決定木分析.html#cb289-259" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb289-260"><a href="決定木分析.html#cb289-260" tabindex="-1"></a><span class="co">#&gt; Node number 117: 29 observations</span></span>
<span id="cb289-261"><a href="決定木分析.html#cb289-261" tabindex="-1"></a><span class="co">#&gt;   predicted class=acc    expected loss=0.137931  P(node) =0.01933333</span></span>
<span id="cb289-262"><a href="決定木分析.html#cb289-262" tabindex="-1"></a><span class="co">#&gt;     class counts:     4    25     0     0</span></span>
<span id="cb289-263"><a href="決定木分析.html#cb289-263" tabindex="-1"></a><span class="co">#&gt;    probabilities: 0.138 0.862 0.000 0.000 </span></span>
<span id="cb289-264"><a href="決定木分析.html#cb289-264" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb289-265"><a href="決定木分析.html#cb289-265" tabindex="-1"></a><span class="co">#&gt; Node number 120: 29 observations</span></span>
<span id="cb289-266"><a href="決定木分析.html#cb289-266" tabindex="-1"></a><span class="co">#&gt;   predicted class=unacc  expected loss=0.2068966  P(node) =0.01933333</span></span>
<span id="cb289-267"><a href="決定木分析.html#cb289-267" tabindex="-1"></a><span class="co">#&gt;     class counts:    23     6     0     0</span></span>
<span id="cb289-268"><a href="決定木分析.html#cb289-268" tabindex="-1"></a><span class="co">#&gt;    probabilities: 0.793 0.207 0.000 0.000 </span></span>
<span id="cb289-269"><a href="決定木分析.html#cb289-269" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb289-270"><a href="決定木分析.html#cb289-270" tabindex="-1"></a><span class="co">#&gt; Node number 121: 29 observations</span></span>
<span id="cb289-271"><a href="決定木分析.html#cb289-271" tabindex="-1"></a><span class="co">#&gt;   predicted class=acc    expected loss=0.1034483  P(node) =0.01933333</span></span>
<span id="cb289-272"><a href="決定木分析.html#cb289-272" tabindex="-1"></a><span class="co">#&gt;     class counts:     3    26     0     0</span></span>
<span id="cb289-273"><a href="決定木分析.html#cb289-273" tabindex="-1"></a><span class="co">#&gt;    probabilities: 0.103 0.897 0.000 0.000 </span></span>
<span id="cb289-274"><a href="決定木分析.html#cb289-274" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb289-275"><a href="決定木分析.html#cb289-275" tabindex="-1"></a><span class="co">#&gt; Node number 124: 28 observations</span></span>
<span id="cb289-276"><a href="決定木分析.html#cb289-276" tabindex="-1"></a><span class="co">#&gt;   predicted class=acc    expected loss=0.1071429  P(node) =0.01866667</span></span>
<span id="cb289-277"><a href="決定木分析.html#cb289-277" tabindex="-1"></a><span class="co">#&gt;     class counts:     3    25     0     0</span></span>
<span id="cb289-278"><a href="決定木分析.html#cb289-278" tabindex="-1"></a><span class="co">#&gt;    probabilities: 0.107 0.893 0.000 0.000 </span></span>
<span id="cb289-279"><a href="決定木分析.html#cb289-279" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb289-280"><a href="決定木分析.html#cb289-280" tabindex="-1"></a><span class="co">#&gt; Node number 125: 53 observations,    complexity param=0.01327434</span></span>
<span id="cb289-281"><a href="決定木分析.html#cb289-281" tabindex="-1"></a><span class="co">#&gt;   predicted class=good   expected loss=0.3773585  P(node) =0.03533333</span></span>
<span id="cb289-282"><a href="決定木分析.html#cb289-282" tabindex="-1"></a><span class="co">#&gt;     class counts:     0    20    33     0</span></span>
<span id="cb289-283"><a href="決定木分析.html#cb289-283" tabindex="-1"></a><span class="co">#&gt;    probabilities: 0.000 0.377 0.623 0.000 </span></span>
<span id="cb289-284"><a href="決定木分析.html#cb289-284" tabindex="-1"></a><span class="co">#&gt;   left son=250 (25 obs) right son=251 (28 obs)</span></span>
<span id="cb289-285"><a href="決定木分析.html#cb289-285" tabindex="-1"></a><span class="co">#&gt;   Primary splits:</span></span>
<span id="cb289-286"><a href="決定木分析.html#cb289-286" tabindex="-1"></a><span class="co">#&gt;       価格帯   splits as  --LR, improve=4.69137500, (0 missing)</span></span>
<span id="cb289-287"><a href="決定木分析.html#cb289-287" tabindex="-1"></a><span class="co">#&gt;       維持費   splits as  --LR, improve=2.97708900, (0 missing)</span></span>
<span id="cb289-288"><a href="決定木分析.html#cb289-288" tabindex="-1"></a><span class="co">#&gt;       ドア数   splits as  LRRR, improve=2.68221700, (0 missing)</span></span>
<span id="cb289-289"><a href="決定木分析.html#cb289-289" tabindex="-1"></a><span class="co">#&gt;       収納性   splits as  -LR,  improve=1.42290200, (0 missing)</span></span>
<span id="cb289-290"><a href="決定木分析.html#cb289-290" tabindex="-1"></a><span class="co">#&gt;       乗車人数 splits as  -LR,  improve=0.04851752, (0 missing)</span></span>
<span id="cb289-291"><a href="決定木分析.html#cb289-291" tabindex="-1"></a><span class="co">#&gt;   Surrogate splits:</span></span>
<span id="cb289-292"><a href="決定木分析.html#cb289-292" tabindex="-1"></a><span class="co">#&gt;       維持費 splits as  --RL, agree=0.547, adj=0.04, (0 split)</span></span>
<span id="cb289-293"><a href="決定木分析.html#cb289-293" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb289-294"><a href="決定木分析.html#cb289-294" tabindex="-1"></a><span class="co">#&gt; Node number 126: 28 observations</span></span>
<span id="cb289-295"><a href="決定木分析.html#cb289-295" tabindex="-1"></a><span class="co">#&gt;   predicted class=good   expected loss=0.3571429  P(node) =0.01866667</span></span>
<span id="cb289-296"><a href="決定木分析.html#cb289-296" tabindex="-1"></a><span class="co">#&gt;     class counts:     4     6    18     0</span></span>
<span id="cb289-297"><a href="決定木分析.html#cb289-297" tabindex="-1"></a><span class="co">#&gt;    probabilities: 0.143 0.214 0.643 0.000 </span></span>
<span id="cb289-298"><a href="決定木分析.html#cb289-298" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb289-299"><a href="決定木分析.html#cb289-299" tabindex="-1"></a><span class="co">#&gt; Node number 127: 62 observations</span></span>
<span id="cb289-300"><a href="決定木分析.html#cb289-300" tabindex="-1"></a><span class="co">#&gt;   predicted class=vgood  expected loss=0.1935484  P(node) =0.04133333</span></span>
<span id="cb289-301"><a href="決定木分析.html#cb289-301" tabindex="-1"></a><span class="co">#&gt;     class counts:     0     3     9    50</span></span>
<span id="cb289-302"><a href="決定木分析.html#cb289-302" tabindex="-1"></a><span class="co">#&gt;    probabilities: 0.000 0.048 0.145 0.806 </span></span>
<span id="cb289-303"><a href="決定木分析.html#cb289-303" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb289-304"><a href="決定木分析.html#cb289-304" tabindex="-1"></a><span class="co">#&gt; Node number 250: 25 observations,    complexity param=0.01327434</span></span>
<span id="cb289-305"><a href="決定木分析.html#cb289-305" tabindex="-1"></a><span class="co">#&gt;   predicted class=acc    expected loss=0.4  P(node) =0.01666667</span></span>
<span id="cb289-306"><a href="決定木分析.html#cb289-306" tabindex="-1"></a><span class="co">#&gt;     class counts:     0    15    10     0</span></span>
<span id="cb289-307"><a href="決定木分析.html#cb289-307" tabindex="-1"></a><span class="co">#&gt;    probabilities: 0.000 0.600 0.400 0.000 </span></span>
<span id="cb289-308"><a href="決定木分析.html#cb289-308" tabindex="-1"></a><span class="co">#&gt;   left son=500 (12 obs) right son=501 (13 obs)</span></span>
<span id="cb289-309"><a href="決定木分析.html#cb289-309" tabindex="-1"></a><span class="co">#&gt;   Primary splits:</span></span>
<span id="cb289-310"><a href="決定木分析.html#cb289-310" tabindex="-1"></a><span class="co">#&gt;       維持費   splits as  --LR, improve=7.38461500, (0 missing)</span></span>
<span id="cb289-311"><a href="決定木分析.html#cb289-311" tabindex="-1"></a><span class="co">#&gt;       ドア数   splits as  LLRR, improve=0.63636360, (0 missing)</span></span>
<span id="cb289-312"><a href="決定木分析.html#cb289-312" tabindex="-1"></a><span class="co">#&gt;       収納性   splits as  -LR,  improve=0.11688310, (0 missing)</span></span>
<span id="cb289-313"><a href="決定木分析.html#cb289-313" tabindex="-1"></a><span class="co">#&gt;       乗車人数 splits as  -LR,  improve=0.05194805, (0 missing)</span></span>
<span id="cb289-314"><a href="決定木分析.html#cb289-314" tabindex="-1"></a><span class="co">#&gt;   Surrogate splits:</span></span>
<span id="cb289-315"><a href="決定木分析.html#cb289-315" tabindex="-1"></a><span class="co">#&gt;       ドア数 splits as  RRLR, agree=0.56, adj=0.083, (0 split)</span></span>
<span id="cb289-316"><a href="決定木分析.html#cb289-316" tabindex="-1"></a><span class="co">#&gt;       収納性 splits as  -RL,  agree=0.56, adj=0.083, (0 split)</span></span>
<span id="cb289-317"><a href="決定木分析.html#cb289-317" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb289-318"><a href="決定木分析.html#cb289-318" tabindex="-1"></a><span class="co">#&gt; Node number 251: 28 observations</span></span>
<span id="cb289-319"><a href="決定木分析.html#cb289-319" tabindex="-1"></a><span class="co">#&gt;   predicted class=good   expected loss=0.1785714  P(node) =0.01866667</span></span>
<span id="cb289-320"><a href="決定木分析.html#cb289-320" tabindex="-1"></a><span class="co">#&gt;     class counts:     0     5    23     0</span></span>
<span id="cb289-321"><a href="決定木分析.html#cb289-321" tabindex="-1"></a><span class="co">#&gt;    probabilities: 0.000 0.179 0.821 0.000 </span></span>
<span id="cb289-322"><a href="決定木分析.html#cb289-322" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb289-323"><a href="決定木分析.html#cb289-323" tabindex="-1"></a><span class="co">#&gt; Node number 500: 12 observations</span></span>
<span id="cb289-324"><a href="決定木分析.html#cb289-324" tabindex="-1"></a><span class="co">#&gt;   predicted class=acc    expected loss=0  P(node) =0.008</span></span>
<span id="cb289-325"><a href="決定木分析.html#cb289-325" tabindex="-1"></a><span class="co">#&gt;     class counts:     0    12     0     0</span></span>
<span id="cb289-326"><a href="決定木分析.html#cb289-326" tabindex="-1"></a><span class="co">#&gt;    probabilities: 0.000 1.000 0.000 0.000 </span></span>
<span id="cb289-327"><a href="決定木分析.html#cb289-327" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb289-328"><a href="決定木分析.html#cb289-328" tabindex="-1"></a><span class="co">#&gt; Node number 501: 13 observations</span></span>
<span id="cb289-329"><a href="決定木分析.html#cb289-329" tabindex="-1"></a><span class="co">#&gt;   predicted class=good   expected loss=0.2307692  P(node) =0.008666667</span></span>
<span id="cb289-330"><a href="決定木分析.html#cb289-330" tabindex="-1"></a><span class="co">#&gt;     class counts:     0     3    10     0</span></span>
<span id="cb289-331"><a href="決定木分析.html#cb289-331" tabindex="-1"></a><span class="co">#&gt;    probabilities: 0.000 0.231 0.769 0.000</span></span>
<span id="cb289-332"><a href="決定木分析.html#cb289-332" tabindex="-1"></a><span class="fu">plot</span>(res_rp, <span class="at">uniform =</span> T, <span class="at">margin =</span> <span class="fl">0.03</span>)  <span class="co"># → 美しくない</span></span>
<span id="cb289-333"><a href="決定木分析.html#cb289-333" tabindex="-1"></a><span class="fu">text</span>(res_rp, <span class="at">all =</span> T, <span class="at">use.n =</span> T)  <span class="co"># → 美しくない</span></span></code></pre></div>
<p><img src="090-DT_files/figure-html/unnamed-chunk-16-1.png" width="75%" /></p>
<div class="sourceCode" id="cb290"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb290-1"><a href="決定木分析.html#cb290-1" tabindex="-1"></a></span>
<span id="cb290-2"><a href="決定木分析.html#cb290-2" tabindex="-1"></a><span class="fu">plotcp</span>(res_rp)</span></code></pre></div>
<p><img src="090-DT_files/figure-html/unnamed-chunk-16-2.png" width="75%" /></p>
<div class="sourceCode" id="cb291"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb291-1"><a href="決定木分析.html#cb291-1" tabindex="-1"></a></span>
<span id="cb291-2"><a href="決定木分析.html#cb291-2" tabindex="-1"></a><span class="co"># res.pred &lt;- predict(res.rpart) head(res.pred); tail(res.pred) res.pred.1 &lt;-</span></span>
<span id="cb291-3"><a href="決定木分析.html#cb291-3" tabindex="-1"></a><span class="co"># apply(res.pred, 1, which.max)</span></span></code></pre></div>
<div class="sourceCode" id="cb292"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb292-1"><a href="決定木分析.html#cb292-1" tabindex="-1"></a><span class="fu">library</span>(rpart.plot)</span>
<span id="cb292-2"><a href="決定木分析.html#cb292-2" tabindex="-1"></a>res.rp <span class="ot">&lt;-</span> <span class="fu">rpart</span>(評価 <span class="sc">~</span> ., <span class="at">data =</span> cardata, <span class="at">control =</span> <span class="fu">rpart.control</span>(<span class="at">cp =</span> <span class="fl">0.1</span>))</span>
<span id="cb292-3"><a href="決定木分析.html#cb292-3" tabindex="-1"></a><span class="fu">rpart.plot</span>(res_rp, <span class="at">digit =</span> <span class="dv">3</span>)  <span class="co">#, col = c(&#39;red&#39;, &#39;orange&#39;, &#39;yellow&#39;, &#39;blue&#39;))</span></span></code></pre></div>
<p><img src="090-DT_files/figure-html/unnamed-chunk-17-1.png" width="75%" /></p>
<div class="sourceCode" id="cb293"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb293-1"><a href="決定木分析.html#cb293-1" tabindex="-1"></a><span class="fu">rpart.plot</span>(res_rp, <span class="at">digit =</span> <span class="dv">4</span>, <span class="at">fallen.leaves =</span> T, <span class="at">type =</span> <span class="dv">3</span>, <span class="at">extra =</span> <span class="dv">101</span>)</span></code></pre></div>
<p><img src="090-DT_files/figure-html/unnamed-chunk-17-2.png" width="75%" /></p>
<p>学習済モデルを使い, テスト用データで外挿予測のパフォーマンスを評価する.</p>
<div class="sourceCode" id="cb294"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb294-1"><a href="決定木分析.html#cb294-1" tabindex="-1"></a>car_rp_pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(res_rp, car_test, <span class="at">type =</span> <span class="st">&quot;class&quot;</span>)  <span class="co"># クラス分類の予測結果出力</span></span>
<span id="cb294-2"><a href="決定木分析.html#cb294-2" tabindex="-1"></a><span class="co"># car_rp_pred &lt;- predict(res_rp, car_test, type = &#39;prob&#39;)\t# 確率の出力</span></span></code></pre></div>
<p>パッケージ<strong>caret</strong>の関数<code>confusionMatrix()</code>を使って,
混同行列より各種評価指標を計算する.
2種類の表示モードで結果を示す:</p>
<ul>
<li>適合率 (precision) - 再現率 (recall) 表示</li>
<li>感度(sensitivity) - 特異度 (specificity) 表示</li>
</ul>
<div class="sourceCode" id="cb295"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb295-1"><a href="決定木分析.html#cb295-1" tabindex="-1"></a><span class="co"># 混同行列</span></span>
<span id="cb295-2"><a href="決定木分析.html#cb295-2" tabindex="-1"></a>tbl_rp <span class="ot">&lt;-</span> <span class="fu">table</span>(car_rp_pred, car_test<span class="sc">$</span>評価)</span>
<span id="cb295-3"><a href="決定木分析.html#cb295-3" tabindex="-1"></a><span class="fu">library</span>(caret)</span>
<span id="cb295-4"><a href="決定木分析.html#cb295-4" tabindex="-1"></a><span class="co"># 適合率 (precision) - 再現率 (recall) 表示</span></span>
<span id="cb295-5"><a href="決定木分析.html#cb295-5" tabindex="-1"></a><span class="fu">confusionMatrix</span>(tbl_rp, <span class="at">mode =</span> <span class="st">&quot;prec_recall&quot;</span>)</span>
<span id="cb295-6"><a href="決定木分析.html#cb295-6" tabindex="-1"></a><span class="co">#&gt; Confusion Matrix and Statistics</span></span>
<span id="cb295-7"><a href="決定木分析.html#cb295-7" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb295-8"><a href="決定木分析.html#cb295-8" tabindex="-1"></a><span class="co">#&gt;            </span></span>
<span id="cb295-9"><a href="決定木分析.html#cb295-9" tabindex="-1"></a><span class="co">#&gt; car_rp_pred unacc acc good vgood</span></span>
<span id="cb295-10"><a href="決定木分析.html#cb295-10" tabindex="-1"></a><span class="co">#&gt;       unacc   159   1    0     0</span></span>
<span id="cb295-11"><a href="決定木分析.html#cb295-11" tabindex="-1"></a><span class="co">#&gt;       acc       3  51    0     1</span></span>
<span id="cb295-12"><a href="決定木分析.html#cb295-12" tabindex="-1"></a><span class="co">#&gt;       good      0   2    9     0</span></span>
<span id="cb295-13"><a href="決定木分析.html#cb295-13" tabindex="-1"></a><span class="co">#&gt;       vgood     0   0    0     2</span></span>
<span id="cb295-14"><a href="決定木分析.html#cb295-14" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb295-15"><a href="決定木分析.html#cb295-15" tabindex="-1"></a><span class="co">#&gt; Overall Statistics</span></span>
<span id="cb295-16"><a href="決定木分析.html#cb295-16" tabindex="-1"></a><span class="co">#&gt;                                           </span></span>
<span id="cb295-17"><a href="決定木分析.html#cb295-17" tabindex="-1"></a><span class="co">#&gt;                Accuracy : 0.9693          </span></span>
<span id="cb295-18"><a href="決定木分析.html#cb295-18" tabindex="-1"></a><span class="co">#&gt;                  95% CI : (0.9378, 0.9876)</span></span>
<span id="cb295-19"><a href="決定木分析.html#cb295-19" tabindex="-1"></a><span class="co">#&gt;     No Information Rate : 0.7105          </span></span>
<span id="cb295-20"><a href="決定木分析.html#cb295-20" tabindex="-1"></a><span class="co">#&gt;     P-Value [Acc &gt; NIR] : &lt; 2.2e-16       </span></span>
<span id="cb295-21"><a href="決定木分析.html#cb295-21" tabindex="-1"></a><span class="co">#&gt;                                           </span></span>
<span id="cb295-22"><a href="決定木分析.html#cb295-22" tabindex="-1"></a><span class="co">#&gt;                   Kappa : 0.9306          </span></span>
<span id="cb295-23"><a href="決定木分析.html#cb295-23" tabindex="-1"></a><span class="co">#&gt;                                           </span></span>
<span id="cb295-24"><a href="決定木分析.html#cb295-24" tabindex="-1"></a><span class="co">#&gt;  Mcnemar&#39;s Test P-Value : NA              </span></span>
<span id="cb295-25"><a href="決定木分析.html#cb295-25" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb295-26"><a href="決定木分析.html#cb295-26" tabindex="-1"></a><span class="co">#&gt; Statistics by Class:</span></span>
<span id="cb295-27"><a href="決定木分析.html#cb295-27" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb295-28"><a href="決定木分析.html#cb295-28" tabindex="-1"></a><span class="co">#&gt;                      Class: unacc Class: acc Class: good Class: vgood</span></span>
<span id="cb295-29"><a href="決定木分析.html#cb295-29" tabindex="-1"></a><span class="co">#&gt; Precision                  0.9938     0.9273     0.81818     1.000000</span></span>
<span id="cb295-30"><a href="決定木分析.html#cb295-30" tabindex="-1"></a><span class="co">#&gt; Recall                     0.9815     0.9444     1.00000     0.666667</span></span>
<span id="cb295-31"><a href="決定木分析.html#cb295-31" tabindex="-1"></a><span class="co">#&gt; F1                         0.9876     0.9358     0.90000     0.800000</span></span>
<span id="cb295-32"><a href="決定木分析.html#cb295-32" tabindex="-1"></a><span class="co">#&gt; Prevalence                 0.7105     0.2368     0.03947     0.013158</span></span>
<span id="cb295-33"><a href="決定木分析.html#cb295-33" tabindex="-1"></a><span class="co">#&gt; Detection Rate             0.6974     0.2237     0.03947     0.008772</span></span>
<span id="cb295-34"><a href="決定木分析.html#cb295-34" tabindex="-1"></a><span class="co">#&gt; Detection Prevalence       0.7018     0.2412     0.04825     0.008772</span></span>
<span id="cb295-35"><a href="決定木分析.html#cb295-35" tabindex="-1"></a><span class="co">#&gt; Balanced Accuracy          0.9832     0.9607     0.99543     0.833333</span></span>
<span id="cb295-36"><a href="決定木分析.html#cb295-36" tabindex="-1"></a><span class="co"># 感度(sensitivity) - 特異度 (specificity) 表示</span></span>
<span id="cb295-37"><a href="決定木分析.html#cb295-37" tabindex="-1"></a><span class="fu">confusionMatrix</span>(tbl_rp)  <span class="co"># mode = &#39;sens_spec&#39; (デフォルト)</span></span>
<span id="cb295-38"><a href="決定木分析.html#cb295-38" tabindex="-1"></a><span class="co">#&gt; Confusion Matrix and Statistics</span></span>
<span id="cb295-39"><a href="決定木分析.html#cb295-39" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb295-40"><a href="決定木分析.html#cb295-40" tabindex="-1"></a><span class="co">#&gt;            </span></span>
<span id="cb295-41"><a href="決定木分析.html#cb295-41" tabindex="-1"></a><span class="co">#&gt; car_rp_pred unacc acc good vgood</span></span>
<span id="cb295-42"><a href="決定木分析.html#cb295-42" tabindex="-1"></a><span class="co">#&gt;       unacc   159   1    0     0</span></span>
<span id="cb295-43"><a href="決定木分析.html#cb295-43" tabindex="-1"></a><span class="co">#&gt;       acc       3  51    0     1</span></span>
<span id="cb295-44"><a href="決定木分析.html#cb295-44" tabindex="-1"></a><span class="co">#&gt;       good      0   2    9     0</span></span>
<span id="cb295-45"><a href="決定木分析.html#cb295-45" tabindex="-1"></a><span class="co">#&gt;       vgood     0   0    0     2</span></span>
<span id="cb295-46"><a href="決定木分析.html#cb295-46" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb295-47"><a href="決定木分析.html#cb295-47" tabindex="-1"></a><span class="co">#&gt; Overall Statistics</span></span>
<span id="cb295-48"><a href="決定木分析.html#cb295-48" tabindex="-1"></a><span class="co">#&gt;                                           </span></span>
<span id="cb295-49"><a href="決定木分析.html#cb295-49" tabindex="-1"></a><span class="co">#&gt;                Accuracy : 0.9693          </span></span>
<span id="cb295-50"><a href="決定木分析.html#cb295-50" tabindex="-1"></a><span class="co">#&gt;                  95% CI : (0.9378, 0.9876)</span></span>
<span id="cb295-51"><a href="決定木分析.html#cb295-51" tabindex="-1"></a><span class="co">#&gt;     No Information Rate : 0.7105          </span></span>
<span id="cb295-52"><a href="決定木分析.html#cb295-52" tabindex="-1"></a><span class="co">#&gt;     P-Value [Acc &gt; NIR] : &lt; 2.2e-16       </span></span>
<span id="cb295-53"><a href="決定木分析.html#cb295-53" tabindex="-1"></a><span class="co">#&gt;                                           </span></span>
<span id="cb295-54"><a href="決定木分析.html#cb295-54" tabindex="-1"></a><span class="co">#&gt;                   Kappa : 0.9306          </span></span>
<span id="cb295-55"><a href="決定木分析.html#cb295-55" tabindex="-1"></a><span class="co">#&gt;                                           </span></span>
<span id="cb295-56"><a href="決定木分析.html#cb295-56" tabindex="-1"></a><span class="co">#&gt;  Mcnemar&#39;s Test P-Value : NA              </span></span>
<span id="cb295-57"><a href="決定木分析.html#cb295-57" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb295-58"><a href="決定木分析.html#cb295-58" tabindex="-1"></a><span class="co">#&gt; Statistics by Class:</span></span>
<span id="cb295-59"><a href="決定木分析.html#cb295-59" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb295-60"><a href="決定木分析.html#cb295-60" tabindex="-1"></a><span class="co">#&gt;                      Class: unacc Class: acc Class: good Class: vgood</span></span>
<span id="cb295-61"><a href="決定木分析.html#cb295-61" tabindex="-1"></a><span class="co">#&gt; Sensitivity                0.9815     0.9444     1.00000     0.666667</span></span>
<span id="cb295-62"><a href="決定木分析.html#cb295-62" tabindex="-1"></a><span class="co">#&gt; Specificity                0.9848     0.9770     0.99087     1.000000</span></span>
<span id="cb295-63"><a href="決定木分析.html#cb295-63" tabindex="-1"></a><span class="co">#&gt; Pos Pred Value             0.9938     0.9273     0.81818     1.000000</span></span>
<span id="cb295-64"><a href="決定木分析.html#cb295-64" tabindex="-1"></a><span class="co">#&gt; Neg Pred Value             0.9559     0.9827     1.00000     0.995575</span></span>
<span id="cb295-65"><a href="決定木分析.html#cb295-65" tabindex="-1"></a><span class="co">#&gt; Prevalence                 0.7105     0.2368     0.03947     0.013158</span></span>
<span id="cb295-66"><a href="決定木分析.html#cb295-66" tabindex="-1"></a><span class="co">#&gt; Detection Rate             0.6974     0.2237     0.03947     0.008772</span></span>
<span id="cb295-67"><a href="決定木分析.html#cb295-67" tabindex="-1"></a><span class="co">#&gt; Detection Prevalence       0.7018     0.2412     0.04825     0.008772</span></span>
<span id="cb295-68"><a href="決定木分析.html#cb295-68" tabindex="-1"></a><span class="co">#&gt; Balanced Accuracy          0.9832     0.9607     0.99543     0.833333</span></span></code></pre></div>
<p>パッケージ<strong>caret</strong>は, 多種多様な機械学習アルゴリズムを統一的な環境で
実行し比較できる環境を提供する.
サポートベクターマシン (SVM), 勾配ブースティング, ランダムフォレスト,
ニューラルネット, …, など多様な手法・アルゴリズムをサポートする.</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="判別分析.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="主成分分析-pca.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
